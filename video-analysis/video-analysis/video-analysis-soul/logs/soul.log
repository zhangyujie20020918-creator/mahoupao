{"timestamp": "2026-02-25T13:38:24.566032+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/history/7d45464d-00e0-48ff-9b5b-f389fa23f854/小艾财经说 - 抖音", "module": "logging", "function": "dispatch", "line": 24, "request_id": "072a0c1d"}
{"timestamp": "2026-02-25T13:38:24.569381+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/history/7d45464d-00e0-48ff-9b5b-f389fa23f854/小艾财经说 - 抖音 status=200 duration=0.006s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "072a0c1d"}
{"timestamp": "2026-02-25T13:38:34.915546+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: OPTIONS /api/soul/chat", "module": "logging", "function": "dispatch", "line": 24, "request_id": "0c22352d"}
{"timestamp": "2026-02-25T13:38:34.925232+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: OPTIONS /api/soul/chat status=200 duration=0.010s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "0c22352d"}
{"timestamp": "2026-02-25T13:38:34.927289+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/chat", "module": "logging", "function": "dispatch", "line": 24, "request_id": "2d16b64f"}
{"timestamp": "2026-02-25T13:38:34.928288+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/chat status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "2d16b64f"}
{"timestamp": "2026-02-25T13:38:34.961312+00:00", "level": "INFO", "logger": "managers.persona_manager", "message": "Loaded persona: 小艾财经说 - 抖音 (videos=8, knowledge=0)", "module": "persona_manager", "function": "load_persona", "line": 68}
{"timestamp": "2026-02-25T13:38:34.969311+00:00", "level": "INFO", "logger": "core.graph.nodes.load_context", "message": "Loaded context: user=访客_7d4546, persona=小艾财经说 - 抖音, today_msgs=0, memories=0, anonymous=True", "module": "load_context", "function": "load_context", "line": 54}
{"timestamp": "2026-02-25T13:38:39.018307+00:00", "level": "INFO", "logger": "core.graph.nodes.analyze_message", "message": "Intent analysis: intent=chat, knowledge=False, memory=False", "module": "analyze_message", "function": "analyze_message", "line": 28}
{"timestamp": "2026-02-25T13:38:43.414664+00:00", "level": "INFO", "logger": "core.engine", "message": "Awaiting 3 TTS tasks for sentences: [0, 1, 2]", "module": "engine", "function": "chat_stream", "line": 468}
{"timestamp": "2026-02-25T13:38:47.015062+00:00", "level": "INFO", "logger": "httpx", "message": "HTTP Request: POST http://localhost:8003/api/voice/synthesize \"HTTP/1.1 200 OK\"", "module": "_client", "function": "_send_single_request", "line": 1740}
{"timestamp": "2026-02-25T13:38:47.016062+00:00", "level": "INFO", "logger": "services.tts_service", "message": "TTS synthesis OK: 1.9s audio, 165608 bytes base64", "module": "tts_service", "function": "synthesize", "line": 77}
{"timestamp": "2026-02-25T13:38:47.016062+00:00", "level": "INFO", "logger": "core.engine", "message": "Yielding audio event: sentence=0, base64_bytes=165608, duration=1.9s", "module": "engine", "function": "chat_stream", "line": 477}
{"timestamp": "2026-02-25T13:38:51.994468+00:00", "level": "INFO", "logger": "httpx", "message": "HTTP Request: POST http://localhost:8003/api/voice/synthesize \"HTTP/1.1 200 OK\"", "module": "_client", "function": "_send_single_request", "line": 1740}
{"timestamp": "2026-02-25T13:38:51.997545+00:00", "level": "INFO", "logger": "services.tts_service", "message": "TTS synthesis OK: 14.5s audio, 1233980 bytes base64", "module": "tts_service", "function": "synthesize", "line": 77}
{"timestamp": "2026-02-25T13:38:51.997545+00:00", "level": "INFO", "logger": "core.engine", "message": "Yielding audio event: sentence=1, base64_bytes=1233980, duration=14.5s", "module": "engine", "function": "chat_stream", "line": 477}
{"timestamp": "2026-02-25T13:38:56.642915+00:00", "level": "INFO", "logger": "httpx", "message": "HTTP Request: POST http://localhost:8003/api/voice/synthesize \"HTTP/1.1 200 OK\"", "module": "_client", "function": "_send_single_request", "line": 1740}
{"timestamp": "2026-02-25T13:38:56.670356+00:00", "level": "INFO", "logger": "services.tts_service", "message": "TTS synthesis OK: 10.5s audio, 899472 bytes base64", "module": "tts_service", "function": "synthesize", "line": 77}
{"timestamp": "2026-02-25T13:38:56.670356+00:00", "level": "INFO", "logger": "core.engine", "message": "Yielding audio event: sentence=2, base64_bytes=899472, duration=10.5s", "module": "engine", "function": "chat_stream", "line": 477}
{"timestamp": "2026-02-25T13:38:56.698343+00:00", "level": "INFO", "logger": "core.graph.nodes.post_process", "message": "Saved messages: user_id=7d45464d-00e0-48ff-9b5b-f389fa23f854, soul=小艾财经说 - 抖音, total_messages=2", "module": "post_process", "function": "post_process", "line": 41}
{"timestamp": "2026-02-25T13:41:02.557094+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/history/7d45464d-00e0-48ff-9b5b-f389fa23f854/勇哥说财经 - 抖音", "module": "logging", "function": "dispatch", "line": 24, "request_id": "cf70dd8a"}
{"timestamp": "2026-02-25T13:41:02.560096+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/history/7d45464d-00e0-48ff-9b5b-f389fa23f854/勇哥说财经 - 抖音 status=200 duration=0.003s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "cf70dd8a"}
{"timestamp": "2026-02-25T13:41:08.135800+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/history/7d45464d-00e0-48ff-9b5b-f389fa23f854/小艾财经说 - 抖音", "module": "logging", "function": "dispatch", "line": 24, "request_id": "fe718c4f"}
{"timestamp": "2026-02-25T13:41:08.137796+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/history/7d45464d-00e0-48ff-9b5b-f389fa23f854/小艾财经说 - 抖音 status=200 duration=0.002s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "fe718c4f"}
{"timestamp": "2026-02-25T13:41:09.348443+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/history/7d45464d-00e0-48ff-9b5b-f389fa23f854/勇哥说财经 - 抖音", "module": "logging", "function": "dispatch", "line": 24, "request_id": "3d0540c8"}
{"timestamp": "2026-02-25T13:41:09.349449+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/history/7d45464d-00e0-48ff-9b5b-f389fa23f854/勇哥说财经 - 抖音 status=200 duration=0.003s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "3d0540c8"}
{"timestamp": "2026-02-25T13:41:12.443738+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/status", "module": "logging", "function": "dispatch", "line": 24, "request_id": "ee4ed40d"}
{"timestamp": "2026-02-25T13:41:12.443738+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/status status=200 duration=0.000s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "ee4ed40d"}
{"timestamp": "2026-02-25T13:41:12.445738+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/souls", "module": "logging", "function": "dispatch", "line": 24, "request_id": "d5993976"}
{"timestamp": "2026-02-25T13:41:12.446738+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/souls status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "d5993976"}
{"timestamp": "2026-02-25T13:41:12.447738+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/auth/user/7d45464d-00e0-48ff-9b5b-f389fa23f854", "module": "logging", "function": "dispatch", "line": 24, "request_id": "f82406f8"}
{"timestamp": "2026-02-25T13:41:12.448738+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/auth/user/7d45464d-00e0-48ff-9b5b-f389fa23f854 status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "f82406f8"}
{"timestamp": "2026-02-25T13:41:14.623274+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/history/7d45464d-00e0-48ff-9b5b-f389fa23f854/勇哥说财经 - 抖音", "module": "logging", "function": "dispatch", "line": 24, "request_id": "4fbefa67"}
{"timestamp": "2026-02-25T13:41:14.623274+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/history/7d45464d-00e0-48ff-9b5b-f389fa23f854/勇哥说财经 - 抖音 status=200 duration=0.000s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "4fbefa67"}
{"timestamp": "2026-02-25T13:41:17.354780+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/history/7d45464d-00e0-48ff-9b5b-f389fa23f854/小艾财经说 - 抖音", "module": "logging", "function": "dispatch", "line": 24, "request_id": "aea361d5"}
{"timestamp": "2026-02-25T13:41:17.356779+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/history/7d45464d-00e0-48ff-9b5b-f389fa23f854/小艾财经说 - 抖音 status=200 duration=0.002s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "aea361d5"}
{"timestamp": "2026-02-25T13:41:25.291768+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/history/7d45464d-00e0-48ff-9b5b-f389fa23f854/勇哥说财经 - 抖音", "module": "logging", "function": "dispatch", "line": 24, "request_id": "5d5e8ccf"}
{"timestamp": "2026-02-25T13:41:25.292769+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/history/7d45464d-00e0-48ff-9b5b-f389fa23f854/勇哥说财经 - 抖音 status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "5d5e8ccf"}
{"timestamp": "2026-02-25T13:41:25.520278+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/history/7d45464d-00e0-48ff-9b5b-f389fa23f854/勇哥说财经 - 抖音", "module": "logging", "function": "dispatch", "line": 24, "request_id": "f1471e2e"}
{"timestamp": "2026-02-25T13:41:25.521278+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/history/7d45464d-00e0-48ff-9b5b-f389fa23f854/勇哥说财经 - 抖音 status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "f1471e2e"}
{"timestamp": "2026-02-25T13:41:25.801772+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/history/7d45464d-00e0-48ff-9b5b-f389fa23f854/勇哥说财经 - 抖音", "module": "logging", "function": "dispatch", "line": 24, "request_id": "70df9756"}
{"timestamp": "2026-02-25T13:41:25.802772+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/history/7d45464d-00e0-48ff-9b5b-f389fa23f854/勇哥说财经 - 抖音 status=200 duration=0.002s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "70df9756"}
{"timestamp": "2026-02-25T13:41:29.870856+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/chat", "module": "logging", "function": "dispatch", "line": 24, "request_id": "14a15855"}
{"timestamp": "2026-02-25T13:41:29.871856+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/chat status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "14a15855"}
{"timestamp": "2026-02-25T13:41:29.908385+00:00", "level": "INFO", "logger": "core.graph.nodes.load_context", "message": "Loaded context: user=访客_7d4546, persona=勇哥说财经 - 抖音, today_msgs=0, memories=1, anonymous=True", "module": "load_context", "function": "load_context", "line": 54}
{"timestamp": "2026-02-25T13:41:33.973692+00:00", "level": "INFO", "logger": "core.graph.nodes.analyze_message", "message": "Intent analysis: intent=chat, knowledge=False, memory=False", "module": "analyze_message", "function": "analyze_message", "line": 28}
{"timestamp": "2026-02-25T13:41:39.930745+00:00", "level": "INFO", "logger": "core.engine", "message": "Awaiting 4 TTS tasks for sentences: [0, 1, 2, 3]", "module": "engine", "function": "chat_stream", "line": 468}
{"timestamp": "2026-02-25T13:41:43.179976+00:00", "level": "INFO", "logger": "httpx", "message": "HTTP Request: POST http://localhost:8003/api/voice/synthesize \"HTTP/1.1 200 OK\"", "module": "_client", "function": "_send_single_request", "line": 1740}
{"timestamp": "2026-02-25T13:41:43.180981+00:00", "level": "INFO", "logger": "services.tts_service", "message": "TTS synthesis OK: 3.1s audio, 268008 bytes base64", "module": "tts_service", "function": "synthesize", "line": 77}
{"timestamp": "2026-02-25T13:41:43.180981+00:00", "level": "INFO", "logger": "core.engine", "message": "Yielding audio event: sentence=0, base64_bytes=268008, duration=3.1s", "module": "engine", "function": "chat_stream", "line": 477}
{"timestamp": "2026-02-25T13:41:50.252831+00:00", "level": "INFO", "logger": "httpx", "message": "HTTP Request: POST http://localhost:8003/api/voice/synthesize \"HTTP/1.1 200 OK\"", "module": "_client", "function": "_send_single_request", "line": 1740}
{"timestamp": "2026-02-25T13:41:50.261842+00:00", "level": "INFO", "logger": "services.tts_service", "message": "TTS synthesis OK: 27.3s audio, 2331368 bytes base64", "module": "tts_service", "function": "synthesize", "line": 77}
{"timestamp": "2026-02-25T13:41:50.261842+00:00", "level": "INFO", "logger": "core.engine", "message": "Yielding audio event: sentence=1, base64_bytes=2331368, duration=27.3s", "module": "engine", "function": "chat_stream", "line": 477}
{"timestamp": "2026-02-25T13:41:54.015619+00:00", "level": "INFO", "logger": "httpx", "message": "HTTP Request: POST http://localhost:8003/api/voice/synthesize \"HTTP/1.1 200 OK\"", "module": "_client", "function": "_send_single_request", "line": 1740}
{"timestamp": "2026-02-25T13:41:54.017630+00:00", "level": "INFO", "logger": "services.tts_service", "message": "TTS synthesis OK: 7.3s audio, 626408 bytes base64", "module": "tts_service", "function": "synthesize", "line": 77}
{"timestamp": "2026-02-25T13:41:54.017630+00:00", "level": "INFO", "logger": "core.engine", "message": "Yielding audio event: sentence=2, base64_bytes=626408, duration=7.3s", "module": "engine", "function": "chat_stream", "line": 477}
{"timestamp": "2026-02-25T13:41:59.425565+00:00", "level": "INFO", "logger": "httpx", "message": "HTTP Request: POST http://localhost:8003/api/voice/synthesize \"HTTP/1.1 200 OK\"", "module": "_client", "function": "_send_single_request", "line": 1740}
{"timestamp": "2026-02-25T13:41:59.446473+00:00", "level": "INFO", "logger": "services.tts_service", "message": "TTS synthesis OK: 18.9s audio, 1616272 bytes base64", "module": "tts_service", "function": "synthesize", "line": 77}
{"timestamp": "2026-02-25T13:41:59.446473+00:00", "level": "INFO", "logger": "core.engine", "message": "Yielding audio event: sentence=3, base64_bytes=1616272, duration=18.9s", "module": "engine", "function": "chat_stream", "line": 477}
{"timestamp": "2026-02-25T13:41:59.470722+00:00", "level": "INFO", "logger": "main", "message": "Shutting down...", "module": "main", "function": "lifespan", "line": 38}
{"timestamp": "2026-02-25T13:41:59.471723+00:00", "level": "INFO", "logger": "core.engine", "message": "Stopping SoulEngine...", "module": "engine", "function": "stop", "line": 238}
{"timestamp": "2026-02-25T13:41:59.471723+00:00", "level": "INFO", "logger": "managers.cache_manager", "message": "Session cache manager stopped", "module": "cache_manager", "function": "stop", "line": 48}
{"timestamp": "2026-02-25T13:41:59.471723+00:00", "level": "INFO", "logger": "managers.persona_manager", "message": "PersonaManager closed", "module": "persona_manager", "function": "close", "line": 326}
{"timestamp": "2026-02-25T13:41:59.471723+00:00", "level": "INFO", "logger": "core.engine", "message": "SoulEngine stopped", "module": "engine", "function": "stop", "line": 243}
{"timestamp": "2026-02-25T13:41:59.471723+00:00", "level": "INFO", "logger": "core.graph.nodes.post_process", "message": "Saved messages: user_id=7d45464d-00e0-48ff-9b5b-f389fa23f854, soul=勇哥说财经 - 抖音, total_messages=2", "module": "post_process", "function": "post_process", "line": 41}
{"timestamp": "2026-02-25T13:42:07.874772+00:00", "level": "INFO", "logger": "main", "message": "Starting Video-Analysis-Soul...", "module": "main", "function": "lifespan", "line": 28}
{"timestamp": "2026-02-25T13:42:07.875984+00:00", "level": "INFO", "logger": "core.engine", "message": "Starting SoulEngine...", "module": "engine", "function": "start", "line": 202}
{"timestamp": "2026-02-25T13:42:07.875984+00:00", "level": "INFO", "logger": "managers.cache_manager", "message": "Session cache manager started", "module": "cache_manager", "function": "start", "line": 38}
{"timestamp": "2026-02-25T13:42:07.889022+00:00", "level": "INFO", "logger": "services.embedding_service", "message": "Loading embedding model: BAAI/bge-large-zh-v1.5 (device: cuda)", "module": "embedding_service", "function": "initialize", "line": 46}
{"timestamp": "2026-02-25T13:42:07.891023+00:00", "level": "INFO", "logger": "sentence_transformers.SentenceTransformer", "message": "Load pretrained SentenceTransformer: BAAI/bge-large-zh-v1.5", "module": "SentenceTransformer", "function": "__init__", "line": 227}
{"timestamp": "2026-02-25T13:42:12.142066+00:00", "level": "INFO", "logger": "services.embedding_service", "message": "Embedding model loaded: dim=1024", "module": "embedding_service", "function": "initialize", "line": 50}
{"timestamp": "2026-02-25T13:42:12.143569+00:00", "level": "INFO", "logger": "core.graph.workflow", "message": "LangGraph workflow built successfully", "module": "workflow", "function": "build_workflow", "line": 111}
{"timestamp": "2026-02-25T13:42:12.145842+00:00", "level": "INFO", "logger": "core.graph.workflow", "message": "Context-only workflow built successfully", "module": "workflow", "function": "build_context_workflow", "line": 169}
{"timestamp": "2026-02-25T13:42:12.446163+00:00", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET http://localhost:8003/api/voice/status \"HTTP/1.1 200 OK\"", "module": "_client", "function": "_send_single_request", "line": 1740}
{"timestamp": "2026-02-25T13:42:12.448176+00:00", "level": "INFO", "logger": "core.engine", "message": "TTS service available: True", "module": "engine", "function": "start", "line": 232}
{"timestamp": "2026-02-25T13:42:12.448176+00:00", "level": "INFO", "logger": "core.engine", "message": "SoulEngine started successfully", "module": "engine", "function": "start", "line": 234}
{"timestamp": "2026-02-25T13:42:12.449180+00:00", "level": "INFO", "logger": "main", "message": "Server running on 0.0.0.0:8004", "module": "main", "function": "lifespan", "line": 34}
