{"timestamp": "2026-02-25T02:45:12.178870+00:00", "level": "INFO", "logger": "main", "message": "Starting Video-Analysis-Soul...", "module": "main", "function": "lifespan", "line": 28}
{"timestamp": "2026-02-25T02:45:12.179874+00:00", "level": "INFO", "logger": "core.engine", "message": "Starting SoulEngine...", "module": "engine", "function": "start", "line": 50}
{"timestamp": "2026-02-25T02:45:12.179874+00:00", "level": "INFO", "logger": "managers.cache_manager", "message": "Session cache manager started", "module": "cache_manager", "function": "start", "line": 38}
{"timestamp": "2026-02-25T02:45:12.199874+00:00", "level": "INFO", "logger": "services.embedding_service", "message": "Loading embedding model: BAAI/bge-large-zh-v1.5 (device: cuda)", "module": "embedding_service", "function": "initialize", "line": 46}
{"timestamp": "2026-02-25T02:45:12.201877+00:00", "level": "INFO", "logger": "sentence_transformers.SentenceTransformer", "message": "Load pretrained SentenceTransformer: BAAI/bge-large-zh-v1.5", "module": "SentenceTransformer", "function": "__init__", "line": 227}
{"timestamp": "2026-02-25T02:45:16.321768+00:00", "level": "INFO", "logger": "services.embedding_service", "message": "Embedding model loaded: dim=1024", "module": "embedding_service", "function": "initialize", "line": 50}
{"timestamp": "2026-02-25T02:45:16.322270+00:00", "level": "INFO", "logger": "core.graph.workflow", "message": "LangGraph workflow built successfully", "module": "workflow", "function": "build_workflow", "line": 105}
{"timestamp": "2026-02-25T02:45:16.324485+00:00", "level": "INFO", "logger": "core.engine", "message": "SoulEngine started successfully", "module": "engine", "function": "start", "line": 71}
{"timestamp": "2026-02-25T02:45:16.324485+00:00", "level": "INFO", "logger": "main", "message": "Server running on 0.0.0.0:8004", "module": "main", "function": "lifespan", "line": 34}
{"timestamp": "2026-02-25T02:45:24.599923+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/status", "module": "logging", "function": "dispatch", "line": 24, "request_id": "1396fdf6"}
{"timestamp": "2026-02-25T02:45:24.600922+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/status status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "1396fdf6"}
{"timestamp": "2026-02-25T02:45:28.374964+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/models", "module": "logging", "function": "dispatch", "line": 24, "request_id": "2ed86c27"}
{"timestamp": "2026-02-25T02:45:28.375965+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/models status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "2ed86c27"}
{"timestamp": "2026-02-25T02:45:28.902901+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "e0ab1929"}
{"timestamp": "2026-02-25T02:45:28.903901+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.002s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "e0ab1929"}
{"timestamp": "2026-02-25T02:45:29.430562+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "3813ec1d"}
{"timestamp": "2026-02-25T02:45:29.432562+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/users status=200 duration=0.003s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "3813ec1d"}
{"timestamp": "2026-02-25T02:45:33.397755+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "3f966286"}
{"timestamp": "2026-02-25T02:45:33.398754+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/users status=400 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "3f966286"}
{"timestamp": "2026-02-25T02:45:37.962568+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "e378c4e1"}
{"timestamp": "2026-02-25T02:45:37.965567+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Created user: 64e5510a-d544-4b6e-a088-c18ba36a5adf (TestUser)", "module": "user_repository", "function": "create", "line": 49}
{"timestamp": "2026-02-25T02:45:37.965567+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/users status=200 duration=0.004s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "e378c4e1"}
{"timestamp": "2026-02-25T02:45:41.417549+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "1abfcd65"}
{"timestamp": "2026-02-25T02:45:41.435573+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/users status=200 duration=0.019s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "1abfcd65"}
{"timestamp": "2026-02-25T02:45:43.453579+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers/勇哥说财经 - 抖音", "module": "logging", "function": "dispatch", "line": 24, "request_id": "52cae8be"}
{"timestamp": "2026-02-25T02:45:43.455578+00:00", "level": "INFO", "logger": "managers.persona_manager", "message": "Loaded persona: 勇哥说财经 - 抖音 (videos=39, knowledge=0)", "module": "persona_manager", "function": "load_persona", "line": 68}
{"timestamp": "2026-02-25T02:45:43.456578+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers/勇哥说财经 - 抖音 status=200 duration=0.003s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "52cae8be"}
{"timestamp": "2026-02-25T02:45:48.186076+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/chat", "module": "logging", "function": "dispatch", "line": 24, "request_id": "23110afe"}
{"timestamp": "2026-02-25T02:45:48.187075+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/chat status=400 duration=0.002s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "23110afe"}
{"timestamp": "2026-02-25T02:46:16.295035+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/status", "module": "logging", "function": "dispatch", "line": 24, "request_id": "cae75377"}
{"timestamp": "2026-02-25T02:46:16.295035+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/status status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "cae75377"}
{"timestamp": "2026-02-25T02:46:18.325611+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/models", "module": "logging", "function": "dispatch", "line": 24, "request_id": "a65834b3"}
{"timestamp": "2026-02-25T02:46:18.326611+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/models status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "a65834b3"}
{"timestamp": "2026-02-25T02:46:20.358506+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "a58d36de"}
{"timestamp": "2026-02-25T02:46:20.359505+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.002s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "a58d36de"}
{"timestamp": "2026-02-25T02:46:22.379778+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers/勇哥说财经 - 抖音", "module": "logging", "function": "dispatch", "line": 24, "request_id": "d98936bf"}
{"timestamp": "2026-02-25T02:46:22.380784+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers/勇哥说财经 - 抖音 status=200 duration=0.002s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "d98936bf"}
{"timestamp": "2026-02-25T02:46:24.435010+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "0988466a"}
{"timestamp": "2026-02-25T02:46:24.447964+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Created user: edf87502-7f60-4401-8069-b7c4b9f0ef4b (API测试用户)", "module": "user_repository", "function": "create", "line": 49}
{"timestamp": "2026-02-25T02:46:24.447964+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/users status=200 duration=0.013s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "0988466a"}
{"timestamp": "2026-02-25T02:46:26.480786+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "85dc3f2c"}
{"timestamp": "2026-02-25T02:46:26.491787+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/users status=200 duration=0.011s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "85dc3f2c"}
{"timestamp": "2026-02-25T02:46:28.527337+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/chat", "module": "logging", "function": "dispatch", "line": 24, "request_id": "a451779a"}
{"timestamp": "2026-02-25T02:46:28.527337+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/chat status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "a451779a"}
{"timestamp": "2026-02-25T02:46:28.543337+00:00", "level": "INFO", "logger": "core.graph.nodes.load_context", "message": "Loaded context: user=API测试用户, persona=勇哥说财经 - 抖音, today_msgs=0, memories=0", "module": "load_context", "function": "load_context", "line": 44}
{"timestamp": "2026-02-25T02:46:31.167477+00:00", "level": "INFO", "logger": "core.graph.nodes.analyze_message", "message": "Intent analysis: intent=greeting, knowledge=False, memory=False", "module": "analyze_message", "function": "analyze_message", "line": 28}
{"timestamp": "2026-02-25T02:46:34.870506+00:00", "level": "INFO", "logger": "core.graph.nodes.post_process", "message": "Saved messages: user_id=edf87502-7f60-4401-8069-b7c4b9f0ef4b, blogger=勇哥说财经 - 抖音, total_messages=2", "module": "post_process", "function": "post_process", "line": 41}
{"timestamp": "2026-02-25T02:46:36.941358+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/history/edf87502-7f60-4401-8069-b7c4b9f0ef4b/勇哥说财经 - 抖音", "module": "logging", "function": "dispatch", "line": 24, "request_id": "d5d9e524"}
{"timestamp": "2026-02-25T02:46:36.942357+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/history/edf87502-7f60-4401-8069-b7c4b9f0ef4b/勇哥说财经 - 抖音 status=200 duration=0.002s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "d5d9e524"}
{"timestamp": "2026-02-25T02:46:38.992811+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: DELETE /api/soul/users/edf87502-7f60-4401-8069-b7c4b9f0ef4b", "module": "logging", "function": "dispatch", "line": 24, "request_id": "d6fb1f6f"}
{"timestamp": "2026-02-25T02:46:39.005812+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Deleted user: edf87502-7f60-4401-8069-b7c4b9f0ef4b", "module": "user_repository", "function": "delete", "line": 70}
{"timestamp": "2026-02-25T02:46:39.005812+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: DELETE /api/soul/users/edf87502-7f60-4401-8069-b7c4b9f0ef4b status=200 duration=0.013s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "d6fb1f6f"}
{"timestamp": "2026-02-25T02:46:41.043199+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: DELETE /api/soul/users/nonexistent", "module": "logging", "function": "dispatch", "line": 24, "request_id": "55b0abcd"}
{"timestamp": "2026-02-25T02:46:41.043199+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: DELETE /api/soul/users/nonexistent status=404 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "55b0abcd"}
{"timestamp": "2026-02-25T02:46:43.102526+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers/不存在的", "module": "logging", "function": "dispatch", "line": 24, "request_id": "57219e56"}
{"timestamp": "2026-02-25T02:46:43.102526+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers/不存在的 status=404 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "57219e56"}
{"timestamp": "2026-02-25T03:59:29.429317+00:00", "level": "INFO", "logger": "main", "message": "Starting Video-Analysis-Soul...", "module": "main", "function": "lifespan", "line": 28}
{"timestamp": "2026-02-25T03:59:29.430319+00:00", "level": "INFO", "logger": "core.engine", "message": "Starting SoulEngine...", "module": "engine", "function": "start", "line": 50}
{"timestamp": "2026-02-25T03:59:29.430319+00:00", "level": "INFO", "logger": "managers.cache_manager", "message": "Session cache manager started", "module": "cache_manager", "function": "start", "line": 38}
{"timestamp": "2026-02-25T03:59:29.448316+00:00", "level": "INFO", "logger": "services.embedding_service", "message": "Loading embedding model: BAAI/bge-large-zh-v1.5 (device: cuda)", "module": "embedding_service", "function": "initialize", "line": 46}
{"timestamp": "2026-02-25T03:59:29.450318+00:00", "level": "INFO", "logger": "sentence_transformers.SentenceTransformer", "message": "Load pretrained SentenceTransformer: BAAI/bge-large-zh-v1.5", "module": "SentenceTransformer", "function": "__init__", "line": 227}
{"timestamp": "2026-02-25T03:59:33.520555+00:00", "level": "INFO", "logger": "services.embedding_service", "message": "Embedding model loaded: dim=1024", "module": "embedding_service", "function": "initialize", "line": 50}
{"timestamp": "2026-02-25T03:59:33.520555+00:00", "level": "INFO", "logger": "core.graph.workflow", "message": "LangGraph workflow built successfully", "module": "workflow", "function": "build_workflow", "line": 105}
{"timestamp": "2026-02-25T03:59:33.522557+00:00", "level": "INFO", "logger": "core.engine", "message": "SoulEngine started successfully", "module": "engine", "function": "start", "line": 71}
{"timestamp": "2026-02-25T03:59:33.522557+00:00", "level": "INFO", "logger": "main", "message": "Server running on 0.0.0.0:8004", "module": "main", "function": "lifespan", "line": 34}
{"timestamp": "2026-02-25T03:59:33.792898+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/status", "module": "logging", "function": "dispatch", "line": 24, "request_id": "156ce300"}
{"timestamp": "2026-02-25T03:59:33.792898+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/status status=200 duration=0.000s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "156ce300"}
{"timestamp": "2026-02-25T03:59:41.061237+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "db485347"}
{"timestamp": "2026-02-25T03:59:41.063238+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.002s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "db485347"}
{"timestamp": "2026-02-25T03:59:41.559011+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/models", "module": "logging", "function": "dispatch", "line": 24, "request_id": "882b3a51"}
{"timestamp": "2026-02-25T03:59:41.559011+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/models status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "882b3a51"}
{"timestamp": "2026-02-25T03:59:46.082773+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "83b2a10c"}
{"timestamp": "2026-02-25T03:59:46.083776+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "83b2a10c"}
{"timestamp": "2026-02-25T03:59:52.964495+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "fbcdc396"}
{"timestamp": "2026-02-25T03:59:52.964495+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "fbcdc396"}
{"timestamp": "2026-02-25T04:00:00.343554+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "31546e4e"}
{"timestamp": "2026-02-25T04:00:00.344552+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "31546e4e"}
{"timestamp": "2026-02-25T04:01:23.857074+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/status", "module": "logging", "function": "dispatch", "line": 24, "request_id": "fd552618"}
{"timestamp": "2026-02-25T04:01:23.858073+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/status status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "fd552618"}
{"timestamp": "2026-02-25T04:01:25.925405+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/status", "module": "logging", "function": "dispatch", "line": 24, "request_id": "ff629301"}
{"timestamp": "2026-02-25T04:01:25.926400+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/status status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "ff629301"}
{"timestamp": "2026-02-25T04:01:27.965562+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/models", "module": "logging", "function": "dispatch", "line": 24, "request_id": "dfcea44f"}
{"timestamp": "2026-02-25T04:01:27.966562+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/models status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "dfcea44f"}
{"timestamp": "2026-02-25T04:01:30.007297+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "09ea52be"}
{"timestamp": "2026-02-25T04:01:30.020998+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Created user: e28ee8b4-3302-4f0c-a7f0-808940f2179f (pytest_user_1771992087)", "module": "user_repository", "function": "create", "line": 49}
{"timestamp": "2026-02-25T04:01:30.020998+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/users status=200 duration=0.014s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "09ea52be"}
{"timestamp": "2026-02-25T04:01:32.041989+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "ff534e70"}
{"timestamp": "2026-02-25T04:01:32.054987+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/users status=200 duration=0.014s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "ff534e70"}
{"timestamp": "2026-02-25T04:01:34.132293+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: DELETE /api/soul/users/e28ee8b4-3302-4f0c-a7f0-808940f2179f", "module": "logging", "function": "dispatch", "line": 24, "request_id": "c04bfdcb"}
{"timestamp": "2026-02-25T04:01:34.134294+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Deleted user: e28ee8b4-3302-4f0c-a7f0-808940f2179f", "module": "user_repository", "function": "delete", "line": 70}
{"timestamp": "2026-02-25T04:01:34.134294+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: DELETE /api/soul/users/e28ee8b4-3302-4f0c-a7f0-808940f2179f status=200 duration=0.002s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "c04bfdcb"}
{"timestamp": "2026-02-25T04:01:36.207981+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "ee8f7dc4"}
{"timestamp": "2026-02-25T04:01:36.211981+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/users status=200 duration=0.004s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "ee8f7dc4"}
{"timestamp": "2026-02-25T04:01:38.280406+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: DELETE /api/soul/users/nonexistent-id-12345", "module": "logging", "function": "dispatch", "line": 24, "request_id": "4fc67f91"}
{"timestamp": "2026-02-25T04:01:38.281420+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: DELETE /api/soul/users/nonexistent-id-12345 status=404 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "4fc67f91"}
{"timestamp": "2026-02-25T04:01:40.351342+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "f18c2f30"}
{"timestamp": "2026-02-25T04:01:40.352342+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "f18c2f30"}
{"timestamp": "2026-02-25T04:01:42.409746+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers/勇哥说财经 - 抖音", "module": "logging", "function": "dispatch", "line": 24, "request_id": "722e7a37"}
{"timestamp": "2026-02-25T04:01:42.410745+00:00", "level": "INFO", "logger": "managers.persona_manager", "message": "Loaded persona: 勇哥说财经 - 抖音 (videos=39, knowledge=0)", "module": "persona_manager", "function": "load_persona", "line": 68}
{"timestamp": "2026-02-25T04:01:42.410745+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers/勇哥说财经 - 抖音 status=200 duration=0.002s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "722e7a37"}
{"timestamp": "2026-02-25T04:01:44.454907+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers/不存在的XYZ", "module": "logging", "function": "dispatch", "line": 24, "request_id": "4065c72d"}
{"timestamp": "2026-02-25T04:01:44.454907+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers/不存在的XYZ status=404 duration=0.000s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "4065c72d"}
{"timestamp": "2026-02-25T04:01:46.470776+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "6c254cb9"}
{"timestamp": "2026-02-25T04:01:46.473778+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Created user: 38a79569-a153-460b-9e93-8d78e2a5e72a (pytest_history_tmp)", "module": "user_repository", "function": "create", "line": 49}
{"timestamp": "2026-02-25T04:01:46.473778+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/users status=200 duration=0.003s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "6c254cb9"}
{"timestamp": "2026-02-25T04:01:48.545343+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "5d671469"}
{"timestamp": "2026-02-25T04:01:48.546346+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "5d671469"}
{"timestamp": "2026-02-25T04:01:50.596440+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/history/38a79569-a153-460b-9e93-8d78e2a5e72a/勇哥说财经 - 抖音", "module": "logging", "function": "dispatch", "line": 24, "request_id": "26e4cf26"}
{"timestamp": "2026-02-25T04:01:50.596440+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/history/38a79569-a153-460b-9e93-8d78e2a5e72a/勇哥说财经 - 抖音 status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "26e4cf26"}
{"timestamp": "2026-02-25T04:01:52.653965+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: DELETE /api/soul/users/38a79569-a153-460b-9e93-8d78e2a5e72a", "module": "logging", "function": "dispatch", "line": 24, "request_id": "b6004a86"}
{"timestamp": "2026-02-25T04:01:52.660964+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Deleted user: 38a79569-a153-460b-9e93-8d78e2a5e72a", "module": "user_repository", "function": "delete", "line": 70}
{"timestamp": "2026-02-25T04:01:52.661965+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: DELETE /api/soul/users/38a79569-a153-460b-9e93-8d78e2a5e72a status=200 duration=0.008s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "b6004a86"}
{"timestamp": "2026-02-25T04:01:54.717876+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "d38d3e0e"}
{"timestamp": "2026-02-25T04:01:54.722877+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Created user: 4bc023ef-e80f-4ad1-951e-9721a0536ed5 (pytest_history_tmp)", "module": "user_repository", "function": "create", "line": 49}
{"timestamp": "2026-02-25T04:01:54.722877+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/users status=200 duration=0.005s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "d38d3e0e"}
{"timestamp": "2026-02-25T04:01:56.788442+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "965c989a"}
{"timestamp": "2026-02-25T04:01:56.789443+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "965c989a"}
{"timestamp": "2026-02-25T04:01:58.809077+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/history/4bc023ef-e80f-4ad1-951e-9721a0536ed5/勇哥说财经 - 抖音", "module": "logging", "function": "dispatch", "line": 24, "request_id": "e62026b7"}
{"timestamp": "2026-02-25T04:01:58.810076+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/history/4bc023ef-e80f-4ad1-951e-9721a0536ed5/勇哥说财经 - 抖音 status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "e62026b7"}
{"timestamp": "2026-02-25T04:02:00.858060+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: DELETE /api/soul/users/4bc023ef-e80f-4ad1-951e-9721a0536ed5", "module": "logging", "function": "dispatch", "line": 24, "request_id": "07b98bbc"}
{"timestamp": "2026-02-25T04:02:00.868429+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Deleted user: 4bc023ef-e80f-4ad1-951e-9721a0536ed5", "module": "user_repository", "function": "delete", "line": 70}
{"timestamp": "2026-02-25T04:02:00.868429+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: DELETE /api/soul/users/4bc023ef-e80f-4ad1-951e-9721a0536ed5 status=200 duration=0.010s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "07b98bbc"}
{"timestamp": "2026-02-25T04:02:02.890356+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "fd75307f"}
{"timestamp": "2026-02-25T04:02:02.892356+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Created user: 459ea716-9065-4fe6-a0f0-2bf70d9af6a4 (pytest_chat_tmp)", "module": "user_repository", "function": "create", "line": 49}
{"timestamp": "2026-02-25T04:02:02.892356+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/users status=200 duration=0.003s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "fd75307f"}
{"timestamp": "2026-02-25T04:02:04.932986+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "ee78f686"}
{"timestamp": "2026-02-25T04:02:04.933997+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "ee78f686"}
{"timestamp": "2026-02-25T04:02:06.987929+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/chat", "module": "logging", "function": "dispatch", "line": 24, "request_id": "3a6eec64"}
{"timestamp": "2026-02-25T04:02:06.989927+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/chat status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "3a6eec64"}
{"timestamp": "2026-02-25T04:02:07.009932+00:00", "level": "INFO", "logger": "core.graph.nodes.load_context", "message": "Loaded context: user=pytest_chat_tmp, persona=勇哥说财经 - 抖音, today_msgs=0, memories=0", "module": "load_context", "function": "load_context", "line": 44}
{"timestamp": "2026-02-25T04:02:17.045408+00:00", "level": "INFO", "logger": "core.graph.nodes.analyze_message", "message": "Intent analysis: intent=chat, knowledge=False, memory=False", "module": "analyze_message", "function": "analyze_message", "line": 28}
{"timestamp": "2026-02-25T04:02:17.202387+00:00", "level": "ERROR", "logger": "services.llm_service", "message": "LLM generation failed: 403 Your API key was reported as leaked. Please use another API key.", "module": "llm_service", "function": "generate", "line": 55}
{"timestamp": "2026-02-25T04:02:17.219884+00:00", "level": "ERROR", "logger": "api.routes.chat", "message": "Chat error: Generation failed: 403 Your API key was reported as leaked. Please use another API key.", "module": "chat", "function": "event_stream", "line": 49, "exception": "Traceback (most recent call last):\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\grpc_helpers_async.py\", line 86, in __await__\n    response = yield from self._call.__await__()\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\grpc\\aio\\_interceptor.py\", line 474, in __await__\n    response = yield from call.__await__()\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\grpc\\aio\\_call.py\", line 327, in __await__\n    raise _create_rpc_error(\ngrpc.aio._call.AioRpcError: <AioRpcError of RPC that terminated with:\n\tstatus = StatusCode.PERMISSION_DENIED\n\tdetails = \"Your API key was reported as leaked. Please use another API key.\"\n\tdebug_error_string = \"UNKNOWN:Error received from peer ipv4:142.250.124.95:443 {grpc_status:7, grpc_message:\"Your API key was reported as leaked. Please use another API key.\"}\"\n>\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\services\\llm_service.py\", line 46, in generate\n    response = await chat.send_message_async(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\generativeai\\generative_models.py\", line 707, in send_message_async\n    response = await self.model.generate_content_async(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\generativeai\\generative_models.py\", line 385, in generate_content_async\n    response = await self._async_client.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\ai\\generativelanguage_v1beta\\services\\generative_service\\async_client.py\", line 440, in generate_content\n    response = await rpc(\n               ^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\retry\\retry_unary_async.py\", line 231, in retry_wrapped_func\n    return await retry_target(\n           ^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\retry\\retry_unary_async.py\", line 163, in retry_target\n    next_sleep = _retry_error_helper(\n                 ^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\retry\\retry_base.py\", line 216, in _retry_error_helper\n    raise final_exc from source_exc\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\retry\\retry_unary_async.py\", line 158, in retry_target\n    return await target()\n           ^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\grpc_helpers_async.py\", line 89, in __await__\n    raise exceptions.from_grpc_error(rpc_error) from rpc_error\ngoogle.api_core.exceptions.PermissionDenied: 403 Your API key was reported as leaked. Please use another API key.\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\api\\routes\\chat.py\", line 34, in event_stream\n    async for event in engine.chat_stream(\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\engine.py\", line 146, in chat_stream\n    result = await self.chat(user_id, blogger_name, message, model)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\engine.py\", line 122, in chat\n    result = await self._compiled_graph.ainvoke(initial_state)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\main.py\", line 3161, in ainvoke\n    async for chunk in self.astream(\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\main.py\", line 2974, in astream\n    async for _ in runner.atick(\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\_runner.py\", line 304, in atick\n    await arun_with_retry(\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\_retry.py\", line 138, in arun_with_retry\n    return await task.proc.ainvoke(task.input, config)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\_internal\\_runnable.py\", line 705, in ainvoke\n    input = await asyncio.create_task(\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\_internal\\_runnable.py\", line 473, in ainvoke\n    ret = await self.afunc(*args, **kwargs)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\graph\\workflow.py\", line 38, in wrapped\n    return await fn(state, **deps)\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\graph\\nodes\\generate_response.py\", line 40, in generate_response\n    response = await generation_service.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\services\\generation_service.py\", line 90, in generate\n    return await self._llm.generate(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\services\\llm_service.py\", line 56, in generate\n    raise LLMError(f\"Generation failed: {e}\")\ncommon.exceptions.LLMError: Generation failed: 403 Your API key was reported as leaked. Please use another API key.\nDuring task with name 'generate' and id 'bb62d0cd-6928-7f5e-0165-9911863fb5e9'"}
{"timestamp": "2026-02-25T04:02:19.342158+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: DELETE /api/soul/users/459ea716-9065-4fe6-a0f0-2bf70d9af6a4", "module": "logging", "function": "dispatch", "line": 24, "request_id": "bda29a41"}
{"timestamp": "2026-02-25T04:02:19.356155+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Deleted user: 459ea716-9065-4fe6-a0f0-2bf70d9af6a4", "module": "user_repository", "function": "delete", "line": 70}
{"timestamp": "2026-02-25T04:02:19.356155+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: DELETE /api/soul/users/459ea716-9065-4fe6-a0f0-2bf70d9af6a4 status=200 duration=0.014s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "bda29a41"}
{"timestamp": "2026-02-25T04:02:21.407408+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "2969c6f5"}
{"timestamp": "2026-02-25T04:02:21.413413+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Created user: 709e326d-ec57-464c-ba17-30dec8ecf0ca (pytest_chat_tmp)", "module": "user_repository", "function": "create", "line": 49}
{"timestamp": "2026-02-25T04:02:21.414413+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/users status=200 duration=0.007s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "2969c6f5"}
{"timestamp": "2026-02-25T04:02:23.461345+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "f0380c48"}
{"timestamp": "2026-02-25T04:02:23.462344+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "f0380c48"}
{"timestamp": "2026-02-25T04:02:25.487918+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/chat", "module": "logging", "function": "dispatch", "line": 24, "request_id": "830dbf9f"}
{"timestamp": "2026-02-25T04:02:25.488918+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/chat status=200 duration=0.002s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "830dbf9f"}
{"timestamp": "2026-02-25T04:02:25.520922+00:00", "level": "INFO", "logger": "core.graph.nodes.load_context", "message": "Loaded context: user=pytest_chat_tmp, persona=勇哥说财经 - 抖音, today_msgs=0, memories=0", "module": "load_context", "function": "load_context", "line": 44}
{"timestamp": "2026-02-25T04:02:25.676997+00:00", "level": "ERROR", "logger": "services.llm_service", "message": "LLM generation failed: 403 Your API key was reported as leaked. Please use another API key.", "module": "llm_service", "function": "generate", "line": 55}
{"timestamp": "2026-02-25T04:02:25.676997+00:00", "level": "WARNING", "logger": "services.analysis_service", "message": "Intent analysis failed, using defaults: Generation failed: 403 Your API key was reported as leaked. Please use another API key.", "module": "analysis_service", "function": "analyze_intent", "line": 75}
{"timestamp": "2026-02-25T04:02:25.676997+00:00", "level": "INFO", "logger": "core.graph.nodes.analyze_message", "message": "Intent analysis: intent=chat, knowledge=False, memory=False", "module": "analyze_message", "function": "analyze_message", "line": 28}
{"timestamp": "2026-02-25T04:02:26.101359+00:00", "level": "ERROR", "logger": "services.llm_service", "message": "LLM generation failed: 403 Your API key was reported as leaked. Please use another API key.", "module": "llm_service", "function": "generate", "line": 55}
{"timestamp": "2026-02-25T04:02:26.102359+00:00", "level": "ERROR", "logger": "api.routes.chat", "message": "Chat error: Generation failed: 403 Your API key was reported as leaked. Please use another API key.", "module": "chat", "function": "event_stream", "line": 49, "exception": "Traceback (most recent call last):\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\grpc_helpers_async.py\", line 86, in __await__\n    response = yield from self._call.__await__()\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\grpc\\aio\\_interceptor.py\", line 474, in __await__\n    response = yield from call.__await__()\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\grpc\\aio\\_call.py\", line 327, in __await__\n    raise _create_rpc_error(\ngrpc.aio._call.AioRpcError: <AioRpcError of RPC that terminated with:\n\tstatus = StatusCode.PERMISSION_DENIED\n\tdetails = \"Your API key was reported as leaked. Please use another API key.\"\n\tdebug_error_string = \"UNKNOWN:Error received from peer ipv4:142.250.124.95:443 {grpc_status:7, grpc_message:\"Your API key was reported as leaked. Please use another API key.\"}\"\n>\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\services\\llm_service.py\", line 46, in generate\n    response = await chat.send_message_async(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\generativeai\\generative_models.py\", line 707, in send_message_async\n    response = await self.model.generate_content_async(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\generativeai\\generative_models.py\", line 385, in generate_content_async\n    response = await self._async_client.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\ai\\generativelanguage_v1beta\\services\\generative_service\\async_client.py\", line 440, in generate_content\n    response = await rpc(\n               ^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\retry\\retry_unary_async.py\", line 231, in retry_wrapped_func\n    return await retry_target(\n           ^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\retry\\retry_unary_async.py\", line 163, in retry_target\n    next_sleep = _retry_error_helper(\n                 ^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\retry\\retry_base.py\", line 216, in _retry_error_helper\n    raise final_exc from source_exc\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\retry\\retry_unary_async.py\", line 158, in retry_target\n    return await target()\n           ^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\grpc_helpers_async.py\", line 89, in __await__\n    raise exceptions.from_grpc_error(rpc_error) from rpc_error\ngoogle.api_core.exceptions.PermissionDenied: 403 Your API key was reported as leaked. Please use another API key.\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\api\\routes\\chat.py\", line 34, in event_stream\n    async for event in engine.chat_stream(\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\engine.py\", line 146, in chat_stream\n    result = await self.chat(user_id, blogger_name, message, model)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\engine.py\", line 122, in chat\n    result = await self._compiled_graph.ainvoke(initial_state)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\main.py\", line 3161, in ainvoke\n    async for chunk in self.astream(\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\main.py\", line 2974, in astream\n    async for _ in runner.atick(\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\_runner.py\", line 304, in atick\n    await arun_with_retry(\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\_retry.py\", line 138, in arun_with_retry\n    return await task.proc.ainvoke(task.input, config)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\_internal\\_runnable.py\", line 705, in ainvoke\n    input = await asyncio.create_task(\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\_internal\\_runnable.py\", line 473, in ainvoke\n    ret = await self.afunc(*args, **kwargs)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\graph\\workflow.py\", line 38, in wrapped\n    return await fn(state, **deps)\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\graph\\nodes\\generate_response.py\", line 40, in generate_response\n    response = await generation_service.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\services\\generation_service.py\", line 90, in generate\n    return await self._llm.generate(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\services\\llm_service.py\", line 56, in generate\n    raise LLMError(f\"Generation failed: {e}\")\ncommon.exceptions.LLMError: Generation failed: 403 Your API key was reported as leaked. Please use another API key.\nDuring task with name 'generate' and id '658210cc-a053-a34f-7700-19e8d4d96dfc'"}
{"timestamp": "2026-02-25T04:02:28.160639+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: DELETE /api/soul/users/709e326d-ec57-464c-ba17-30dec8ecf0ca", "module": "logging", "function": "dispatch", "line": 24, "request_id": "cd88a289"}
{"timestamp": "2026-02-25T04:02:28.169637+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Deleted user: 709e326d-ec57-464c-ba17-30dec8ecf0ca", "module": "user_repository", "function": "delete", "line": 70}
{"timestamp": "2026-02-25T04:02:28.169637+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: DELETE /api/soul/users/709e326d-ec57-464c-ba17-30dec8ecf0ca status=200 duration=0.010s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "cd88a289"}
{"timestamp": "2026-02-25T04:02:30.216984+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "f2f85e63"}
{"timestamp": "2026-02-25T04:02:30.220983+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Created user: 1084e72e-3ad3-430c-bc72-cf27db4b67b3 (pytest_chat_tmp)", "module": "user_repository", "function": "create", "line": 49}
{"timestamp": "2026-02-25T04:02:30.220983+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/users status=200 duration=0.004s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "f2f85e63"}
{"timestamp": "2026-02-25T04:02:32.275692+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "6e0d6318"}
{"timestamp": "2026-02-25T04:02:32.276692+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "6e0d6318"}
{"timestamp": "2026-02-25T04:02:34.343565+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/chat", "module": "logging", "function": "dispatch", "line": 24, "request_id": "716c34d5"}
{"timestamp": "2026-02-25T04:02:34.344568+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/chat status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "716c34d5"}
{"timestamp": "2026-02-25T04:02:36.401059+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: DELETE /api/soul/users/1084e72e-3ad3-430c-bc72-cf27db4b67b3", "module": "logging", "function": "dispatch", "line": 24, "request_id": "8ac0747b"}
{"timestamp": "2026-02-25T04:02:36.410059+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Deleted user: 1084e72e-3ad3-430c-bc72-cf27db4b67b3", "module": "user_repository", "function": "delete", "line": 70}
{"timestamp": "2026-02-25T04:02:36.410059+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: DELETE /api/soul/users/1084e72e-3ad3-430c-bc72-cf27db4b67b3 status=200 duration=0.010s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "8ac0747b"}
{"timestamp": "2026-02-25T04:02:38.486098+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "0ff07263"}
{"timestamp": "2026-02-25T04:02:38.489099+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Created user: aa2ee11b-5d7e-49b7-acbe-42513605aa3b (pytest_chat_tmp)", "module": "user_repository", "function": "create", "line": 49}
{"timestamp": "2026-02-25T04:02:38.490099+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/users status=200 duration=0.003s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "0ff07263"}
{"timestamp": "2026-02-25T04:02:40.540270+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "4ae6685b"}
{"timestamp": "2026-02-25T04:02:40.540270+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.000s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "4ae6685b"}
{"timestamp": "2026-02-25T04:02:42.612330+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/chat", "module": "logging", "function": "dispatch", "line": 24, "request_id": "62316955"}
{"timestamp": "2026-02-25T04:02:42.613332+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/chat status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "62316955"}
{"timestamp": "2026-02-25T04:02:44.697027+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: DELETE /api/soul/users/aa2ee11b-5d7e-49b7-acbe-42513605aa3b", "module": "logging", "function": "dispatch", "line": 24, "request_id": "53d114e5"}
{"timestamp": "2026-02-25T04:02:44.706027+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Deleted user: aa2ee11b-5d7e-49b7-acbe-42513605aa3b", "module": "user_repository", "function": "delete", "line": 70}
{"timestamp": "2026-02-25T04:02:44.706027+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: DELETE /api/soul/users/aa2ee11b-5d7e-49b7-acbe-42513605aa3b status=200 duration=0.009s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "53d114e5"}
{"timestamp": "2026-02-25T04:02:46.754147+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "8aca432b"}
{"timestamp": "2026-02-25T04:02:46.758147+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Created user: 21ad940a-2ecb-48d2-b309-7426bd7be092 (pytest_chat_tmp)", "module": "user_repository", "function": "create", "line": 49}
{"timestamp": "2026-02-25T04:02:46.758147+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/users status=200 duration=0.004s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "8aca432b"}
{"timestamp": "2026-02-25T04:02:48.807905+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "a87484f8"}
{"timestamp": "2026-02-25T04:02:48.810904+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.002s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "a87484f8"}
{"timestamp": "2026-02-25T04:02:50.856849+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/chat", "module": "logging", "function": "dispatch", "line": 24, "request_id": "a37e18c7"}
{"timestamp": "2026-02-25T04:02:50.857848+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/chat status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "a37e18c7"}
{"timestamp": "2026-02-25T04:02:50.883848+00:00", "level": "INFO", "logger": "core.graph.nodes.load_context", "message": "Loaded context: user=pytest_chat_tmp, persona=勇哥说财经 - 抖音, today_msgs=0, memories=0", "module": "load_context", "function": "load_context", "line": 44}
{"timestamp": "2026-02-25T04:02:51.044146+00:00", "level": "ERROR", "logger": "services.llm_service", "message": "LLM generation failed: 403 Your API key was reported as leaked. Please use another API key.", "module": "llm_service", "function": "generate", "line": 55}
{"timestamp": "2026-02-25T04:02:51.044146+00:00", "level": "WARNING", "logger": "services.analysis_service", "message": "Intent analysis failed, using defaults: Generation failed: 403 Your API key was reported as leaked. Please use another API key.", "module": "analysis_service", "function": "analyze_intent", "line": 75}
{"timestamp": "2026-02-25T04:02:51.044146+00:00", "level": "INFO", "logger": "core.graph.nodes.analyze_message", "message": "Intent analysis: intent=chat, knowledge=False, memory=False", "module": "analyze_message", "function": "analyze_message", "line": 28}
{"timestamp": "2026-02-25T04:02:51.457359+00:00", "level": "ERROR", "logger": "services.llm_service", "message": "LLM generation failed: 403 Your API key was reported as leaked. Please use another API key.", "module": "llm_service", "function": "generate", "line": 55}
{"timestamp": "2026-02-25T04:02:51.458361+00:00", "level": "ERROR", "logger": "api.routes.chat", "message": "Chat error: Generation failed: 403 Your API key was reported as leaked. Please use another API key.", "module": "chat", "function": "event_stream", "line": 49, "exception": "Traceback (most recent call last):\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\grpc_helpers_async.py\", line 86, in __await__\n    response = yield from self._call.__await__()\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\grpc\\aio\\_interceptor.py\", line 474, in __await__\n    response = yield from call.__await__()\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\grpc\\aio\\_call.py\", line 327, in __await__\n    raise _create_rpc_error(\ngrpc.aio._call.AioRpcError: <AioRpcError of RPC that terminated with:\n\tstatus = StatusCode.PERMISSION_DENIED\n\tdetails = \"Your API key was reported as leaked. Please use another API key.\"\n\tdebug_error_string = \"UNKNOWN:Error received from peer ipv4:142.250.124.95:443 {grpc_status:7, grpc_message:\"Your API key was reported as leaked. Please use another API key.\"}\"\n>\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\services\\llm_service.py\", line 46, in generate\n    response = await chat.send_message_async(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\generativeai\\generative_models.py\", line 707, in send_message_async\n    response = await self.model.generate_content_async(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\generativeai\\generative_models.py\", line 385, in generate_content_async\n    response = await self._async_client.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\ai\\generativelanguage_v1beta\\services\\generative_service\\async_client.py\", line 440, in generate_content\n    response = await rpc(\n               ^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\retry\\retry_unary_async.py\", line 231, in retry_wrapped_func\n    return await retry_target(\n           ^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\retry\\retry_unary_async.py\", line 163, in retry_target\n    next_sleep = _retry_error_helper(\n                 ^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\retry\\retry_base.py\", line 216, in _retry_error_helper\n    raise final_exc from source_exc\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\retry\\retry_unary_async.py\", line 158, in retry_target\n    return await target()\n           ^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\grpc_helpers_async.py\", line 89, in __await__\n    raise exceptions.from_grpc_error(rpc_error) from rpc_error\ngoogle.api_core.exceptions.PermissionDenied: 403 Your API key was reported as leaked. Please use another API key.\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\api\\routes\\chat.py\", line 34, in event_stream\n    async for event in engine.chat_stream(\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\engine.py\", line 146, in chat_stream\n    result = await self.chat(user_id, blogger_name, message, model)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\engine.py\", line 122, in chat\n    result = await self._compiled_graph.ainvoke(initial_state)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\main.py\", line 3161, in ainvoke\n    async for chunk in self.astream(\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\main.py\", line 2974, in astream\n    async for _ in runner.atick(\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\_runner.py\", line 304, in atick\n    await arun_with_retry(\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\_retry.py\", line 138, in arun_with_retry\n    return await task.proc.ainvoke(task.input, config)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\_internal\\_runnable.py\", line 705, in ainvoke\n    input = await asyncio.create_task(\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\_internal\\_runnable.py\", line 473, in ainvoke\n    ret = await self.afunc(*args, **kwargs)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\graph\\workflow.py\", line 38, in wrapped\n    return await fn(state, **deps)\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\graph\\nodes\\generate_response.py\", line 40, in generate_response\n    response = await generation_service.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\services\\generation_service.py\", line 90, in generate\n    return await self._llm.generate(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\services\\llm_service.py\", line 56, in generate\n    raise LLMError(f\"Generation failed: {e}\")\ncommon.exceptions.LLMError: Generation failed: 403 Your API key was reported as leaked. Please use another API key.\nDuring task with name 'generate' and id '804a9414-1fe0-2721-db4c-bf44abd6f16b'"}
{"timestamp": "2026-02-25T04:02:53.509516+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: DELETE /api/soul/users/21ad940a-2ecb-48d2-b309-7426bd7be092", "module": "logging", "function": "dispatch", "line": 24, "request_id": "ca53de04"}
{"timestamp": "2026-02-25T04:02:53.520515+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Deleted user: 21ad940a-2ecb-48d2-b309-7426bd7be092", "module": "user_repository", "function": "delete", "line": 70}
{"timestamp": "2026-02-25T04:02:53.520515+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: DELETE /api/soul/users/21ad940a-2ecb-48d2-b309-7426bd7be092 status=200 duration=0.012s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "ca53de04"}
{"timestamp": "2026-02-25T04:02:55.599165+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "a824b443"}
{"timestamp": "2026-02-25T04:02:55.603165+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Created user: 2f7f0355-b40b-4437-b547-5ccbb9491cae (pytest_e2e)", "module": "user_repository", "function": "create", "line": 49}
{"timestamp": "2026-02-25T04:02:55.603165+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/users status=200 duration=0.004s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "a824b443"}
{"timestamp": "2026-02-25T04:02:57.632470+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "da8623d3"}
{"timestamp": "2026-02-25T04:02:57.634478+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.002s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "da8623d3"}
{"timestamp": "2026-02-25T04:02:59.703342+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers/勇哥说财经 - 抖音", "module": "logging", "function": "dispatch", "line": 24, "request_id": "0819fadb"}
{"timestamp": "2026-02-25T04:02:59.704344+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers/勇哥说财经 - 抖音 status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "0819fadb"}
{"timestamp": "2026-02-25T04:03:01.749168+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/history/2f7f0355-b40b-4437-b547-5ccbb9491cae/勇哥说财经 - 抖音", "module": "logging", "function": "dispatch", "line": 24, "request_id": "df4397f0"}
{"timestamp": "2026-02-25T04:03:01.749168+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/history/2f7f0355-b40b-4437-b547-5ccbb9491cae/勇哥说财经 - 抖音 status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "df4397f0"}
{"timestamp": "2026-02-25T04:03:03.804002+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/chat", "module": "logging", "function": "dispatch", "line": 24, "request_id": "994de728"}
{"timestamp": "2026-02-25T04:03:03.804002+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/chat status=200 duration=0.000s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "994de728"}
{"timestamp": "2026-02-25T04:03:03.826802+00:00", "level": "INFO", "logger": "core.graph.nodes.load_context", "message": "Loaded context: user=pytest_e2e, persona=勇哥说财经 - 抖音, today_msgs=0, memories=0", "module": "load_context", "function": "load_context", "line": 44}
{"timestamp": "2026-02-25T04:03:03.986149+00:00", "level": "ERROR", "logger": "services.llm_service", "message": "LLM generation failed: 403 Your API key was reported as leaked. Please use another API key.", "module": "llm_service", "function": "generate", "line": 55}
{"timestamp": "2026-02-25T04:03:03.986149+00:00", "level": "WARNING", "logger": "services.analysis_service", "message": "Intent analysis failed, using defaults: Generation failed: 403 Your API key was reported as leaked. Please use another API key.", "module": "analysis_service", "function": "analyze_intent", "line": 75}
{"timestamp": "2026-02-25T04:03:03.986149+00:00", "level": "INFO", "logger": "core.graph.nodes.analyze_message", "message": "Intent analysis: intent=greeting, knowledge=False, memory=False", "module": "analyze_message", "function": "analyze_message", "line": 28}
{"timestamp": "2026-02-25T04:03:04.399343+00:00", "level": "ERROR", "logger": "services.llm_service", "message": "LLM generation failed: 403 Your API key was reported as leaked. Please use another API key.", "module": "llm_service", "function": "generate", "line": 55}
{"timestamp": "2026-02-25T04:03:04.400344+00:00", "level": "ERROR", "logger": "api.routes.chat", "message": "Chat error: Generation failed: 403 Your API key was reported as leaked. Please use another API key.", "module": "chat", "function": "event_stream", "line": 49, "exception": "Traceback (most recent call last):\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\grpc_helpers_async.py\", line 86, in __await__\n    response = yield from self._call.__await__()\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\grpc\\aio\\_interceptor.py\", line 474, in __await__\n    response = yield from call.__await__()\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\grpc\\aio\\_call.py\", line 327, in __await__\n    raise _create_rpc_error(\ngrpc.aio._call.AioRpcError: <AioRpcError of RPC that terminated with:\n\tstatus = StatusCode.PERMISSION_DENIED\n\tdetails = \"Your API key was reported as leaked. Please use another API key.\"\n\tdebug_error_string = \"UNKNOWN:Error received from peer ipv4:142.250.124.95:443 {grpc_message:\"Your API key was reported as leaked. Please use another API key.\", grpc_status:7}\"\n>\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\services\\llm_service.py\", line 46, in generate\n    response = await chat.send_message_async(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\generativeai\\generative_models.py\", line 707, in send_message_async\n    response = await self.model.generate_content_async(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\generativeai\\generative_models.py\", line 385, in generate_content_async\n    response = await self._async_client.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\ai\\generativelanguage_v1beta\\services\\generative_service\\async_client.py\", line 440, in generate_content\n    response = await rpc(\n               ^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\retry\\retry_unary_async.py\", line 231, in retry_wrapped_func\n    return await retry_target(\n           ^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\retry\\retry_unary_async.py\", line 163, in retry_target\n    next_sleep = _retry_error_helper(\n                 ^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\retry\\retry_base.py\", line 216, in _retry_error_helper\n    raise final_exc from source_exc\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\retry\\retry_unary_async.py\", line 158, in retry_target\n    return await target()\n           ^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\grpc_helpers_async.py\", line 89, in __await__\n    raise exceptions.from_grpc_error(rpc_error) from rpc_error\ngoogle.api_core.exceptions.PermissionDenied: 403 Your API key was reported as leaked. Please use another API key.\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\api\\routes\\chat.py\", line 34, in event_stream\n    async for event in engine.chat_stream(\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\engine.py\", line 146, in chat_stream\n    result = await self.chat(user_id, blogger_name, message, model)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\engine.py\", line 122, in chat\n    result = await self._compiled_graph.ainvoke(initial_state)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\main.py\", line 3161, in ainvoke\n    async for chunk in self.astream(\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\main.py\", line 2974, in astream\n    async for _ in runner.atick(\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\_runner.py\", line 304, in atick\n    await arun_with_retry(\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\_retry.py\", line 138, in arun_with_retry\n    return await task.proc.ainvoke(task.input, config)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\_internal\\_runnable.py\", line 705, in ainvoke\n    input = await asyncio.create_task(\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\_internal\\_runnable.py\", line 473, in ainvoke\n    ret = await self.afunc(*args, **kwargs)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\graph\\workflow.py\", line 38, in wrapped\n    return await fn(state, **deps)\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\graph\\nodes\\greeting_flow.py\", line 51, in greeting_flow\n    response = await generation_service.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\services\\generation_service.py\", line 90, in generate\n    return await self._llm.generate(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\services\\llm_service.py\", line 56, in generate\n    raise LLMError(f\"Generation failed: {e}\")\ncommon.exceptions.LLMError: Generation failed: 403 Your API key was reported as leaked. Please use another API key.\nDuring task with name 'greeting' and id '5fddae9a-5647-5c0a-d829-9198d0dc8f54'"}
{"timestamp": "2026-02-25T04:03:06.435689+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: DELETE /api/soul/users/2f7f0355-b40b-4437-b547-5ccbb9491cae", "module": "logging", "function": "dispatch", "line": 24, "request_id": "358ce8bd"}
{"timestamp": "2026-02-25T04:03:06.445693+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Deleted user: 2f7f0355-b40b-4437-b547-5ccbb9491cae", "module": "user_repository", "function": "delete", "line": 70}
{"timestamp": "2026-02-25T04:03:06.445693+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: DELETE /api/soul/users/2f7f0355-b40b-4437-b547-5ccbb9491cae status=200 duration=0.010s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "358ce8bd"}
{"timestamp": "2026-02-25T04:03:18.812785+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "6acf9dbd"}
{"timestamp": "2026-02-25T04:03:18.824971+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Created user: 7b73520e-4b81-494e-8d62-38cf0b83d4d6 (debug_test)", "module": "user_repository", "function": "create", "line": 49}
{"timestamp": "2026-02-25T04:03:18.824971+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/users status=200 duration=0.013s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "6acf9dbd"}
{"timestamp": "2026-02-25T04:03:20.844269+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "6f4cf7c3"}
{"timestamp": "2026-02-25T04:03:20.845269+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "6f4cf7c3"}
{"timestamp": "2026-02-25T04:03:22.891983+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/chat", "module": "logging", "function": "dispatch", "line": 24, "request_id": "49d6a9c0"}
{"timestamp": "2026-02-25T04:03:22.891983+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/chat status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "49d6a9c0"}
{"timestamp": "2026-02-25T04:03:22.912751+00:00", "level": "INFO", "logger": "core.graph.nodes.load_context", "message": "Loaded context: user=debug_test, persona=勇哥说财经 - 抖音, today_msgs=0, memories=0", "module": "load_context", "function": "load_context", "line": 44}
{"timestamp": "2026-02-25T04:03:23.077405+00:00", "level": "ERROR", "logger": "services.llm_service", "message": "LLM generation failed: 403 Your API key was reported as leaked. Please use another API key.", "module": "llm_service", "function": "generate", "line": 55}
{"timestamp": "2026-02-25T04:03:23.077405+00:00", "level": "WARNING", "logger": "services.analysis_service", "message": "Intent analysis failed, using defaults: Generation failed: 403 Your API key was reported as leaked. Please use another API key.", "module": "analysis_service", "function": "analyze_intent", "line": 75}
{"timestamp": "2026-02-25T04:03:23.077405+00:00", "level": "INFO", "logger": "core.graph.nodes.analyze_message", "message": "Intent analysis: intent=greeting, knowledge=False, memory=False", "module": "analyze_message", "function": "analyze_message", "line": 28}
{"timestamp": "2026-02-25T04:03:23.492871+00:00", "level": "ERROR", "logger": "services.llm_service", "message": "LLM generation failed: 403 Your API key was reported as leaked. Please use another API key.", "module": "llm_service", "function": "generate", "line": 55}
{"timestamp": "2026-02-25T04:03:23.493872+00:00", "level": "ERROR", "logger": "api.routes.chat", "message": "Chat error: Generation failed: 403 Your API key was reported as leaked. Please use another API key.", "module": "chat", "function": "event_stream", "line": 49, "exception": "Traceback (most recent call last):\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\grpc_helpers_async.py\", line 86, in __await__\n    response = yield from self._call.__await__()\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\grpc\\aio\\_interceptor.py\", line 474, in __await__\n    response = yield from call.__await__()\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\grpc\\aio\\_call.py\", line 327, in __await__\n    raise _create_rpc_error(\ngrpc.aio._call.AioRpcError: <AioRpcError of RPC that terminated with:\n\tstatus = StatusCode.PERMISSION_DENIED\n\tdetails = \"Your API key was reported as leaked. Please use another API key.\"\n\tdebug_error_string = \"UNKNOWN:Error received from peer ipv4:142.250.124.95:443 {grpc_message:\"Your API key was reported as leaked. Please use another API key.\", grpc_status:7}\"\n>\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\services\\llm_service.py\", line 46, in generate\n    response = await chat.send_message_async(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\generativeai\\generative_models.py\", line 707, in send_message_async\n    response = await self.model.generate_content_async(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\generativeai\\generative_models.py\", line 385, in generate_content_async\n    response = await self._async_client.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\ai\\generativelanguage_v1beta\\services\\generative_service\\async_client.py\", line 440, in generate_content\n    response = await rpc(\n               ^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\retry\\retry_unary_async.py\", line 231, in retry_wrapped_func\n    return await retry_target(\n           ^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\retry\\retry_unary_async.py\", line 163, in retry_target\n    next_sleep = _retry_error_helper(\n                 ^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\retry\\retry_base.py\", line 216, in _retry_error_helper\n    raise final_exc from source_exc\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\retry\\retry_unary_async.py\", line 158, in retry_target\n    return await target()\n           ^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\grpc_helpers_async.py\", line 89, in __await__\n    raise exceptions.from_grpc_error(rpc_error) from rpc_error\ngoogle.api_core.exceptions.PermissionDenied: 403 Your API key was reported as leaked. Please use another API key.\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\api\\routes\\chat.py\", line 34, in event_stream\n    async for event in engine.chat_stream(\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\engine.py\", line 146, in chat_stream\n    result = await self.chat(user_id, blogger_name, message, model)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\engine.py\", line 122, in chat\n    result = await self._compiled_graph.ainvoke(initial_state)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\main.py\", line 3161, in ainvoke\n    async for chunk in self.astream(\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\main.py\", line 2974, in astream\n    async for _ in runner.atick(\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\_runner.py\", line 304, in atick\n    await arun_with_retry(\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\_retry.py\", line 138, in arun_with_retry\n    return await task.proc.ainvoke(task.input, config)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\_internal\\_runnable.py\", line 705, in ainvoke\n    input = await asyncio.create_task(\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\_internal\\_runnable.py\", line 473, in ainvoke\n    ret = await self.afunc(*args, **kwargs)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\graph\\workflow.py\", line 38, in wrapped\n    return await fn(state, **deps)\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\graph\\nodes\\greeting_flow.py\", line 51, in greeting_flow\n    response = await generation_service.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\services\\generation_service.py\", line 90, in generate\n    return await self._llm.generate(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\services\\llm_service.py\", line 56, in generate\n    raise LLMError(f\"Generation failed: {e}\")\ncommon.exceptions.LLMError: Generation failed: 403 Your API key was reported as leaked. Please use another API key.\nDuring task with name 'greeting' and id 'c8fac0e9-02ce-d2bc-5120-e8592f9ae0e8'"}
{"timestamp": "2026-02-25T04:03:25.510962+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: DELETE /api/soul/users/7b73520e-4b81-494e-8d62-38cf0b83d4d6", "module": "logging", "function": "dispatch", "line": 24, "request_id": "d204172b"}
{"timestamp": "2026-02-25T04:03:25.519961+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Deleted user: 7b73520e-4b81-494e-8d62-38cf0b83d4d6", "module": "user_repository", "function": "delete", "line": 70}
{"timestamp": "2026-02-25T04:03:25.519961+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: DELETE /api/soul/users/7b73520e-4b81-494e-8d62-38cf0b83d4d6 status=200 duration=0.009s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "d204172b"}
{"timestamp": "2026-02-25T04:12:05.009966+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/status", "module": "logging", "function": "dispatch", "line": 24, "request_id": "190fa471"}
{"timestamp": "2026-02-25T04:12:05.009966+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/status status=200 duration=0.000s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "190fa471"}
{"timestamp": "2026-02-25T04:12:11.903807+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/models", "module": "logging", "function": "dispatch", "line": 24, "request_id": "c247340b"}
{"timestamp": "2026-02-25T04:12:11.904813+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/models status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "c247340b"}
{"timestamp": "2026-02-25T04:13:10.827535+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/status", "module": "logging", "function": "dispatch", "line": 24, "request_id": "4cee7fe2"}
{"timestamp": "2026-02-25T04:13:10.827535+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/status status=200 duration=0.000s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "4cee7fe2"}
{"timestamp": "2026-02-25T04:13:12.884603+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/status", "module": "logging", "function": "dispatch", "line": 24, "request_id": "dc7e6cf1"}
{"timestamp": "2026-02-25T04:13:12.884603+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/status status=200 duration=0.000s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "dc7e6cf1"}
{"timestamp": "2026-02-25T04:13:14.944797+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/models", "module": "logging", "function": "dispatch", "line": 24, "request_id": "0ff41ea9"}
{"timestamp": "2026-02-25T04:13:14.945798+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/models status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "0ff41ea9"}
{"timestamp": "2026-02-25T04:13:17.000955+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "ec7e10d6"}
{"timestamp": "2026-02-25T04:13:17.003955+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Created user: 69d8f90f-b7d5-42c7-a066-69fec7466a69 (pytest_user_1771992794)", "module": "user_repository", "function": "create", "line": 49}
{"timestamp": "2026-02-25T04:13:17.003955+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/users status=200 duration=0.003s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "ec7e10d6"}
{"timestamp": "2026-02-25T04:13:19.071821+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "f3289c5a"}
{"timestamp": "2026-02-25T04:13:19.080820+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/users status=200 duration=0.009s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "f3289c5a"}
{"timestamp": "2026-02-25T04:13:21.138129+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: DELETE /api/soul/users/69d8f90f-b7d5-42c7-a066-69fec7466a69", "module": "logging", "function": "dispatch", "line": 24, "request_id": "ba04b497"}
{"timestamp": "2026-02-25T04:13:21.139129+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Deleted user: 69d8f90f-b7d5-42c7-a066-69fec7466a69", "module": "user_repository", "function": "delete", "line": 70}
{"timestamp": "2026-02-25T04:13:21.140129+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: DELETE /api/soul/users/69d8f90f-b7d5-42c7-a066-69fec7466a69 status=200 duration=0.002s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "ba04b497"}
{"timestamp": "2026-02-25T04:13:23.215572+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "755bbd5c"}
{"timestamp": "2026-02-25T04:13:23.216573+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/users status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "755bbd5c"}
{"timestamp": "2026-02-25T04:13:25.276004+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: DELETE /api/soul/users/nonexistent-id-12345", "module": "logging", "function": "dispatch", "line": 24, "request_id": "3efd0292"}
{"timestamp": "2026-02-25T04:13:25.277006+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: DELETE /api/soul/users/nonexistent-id-12345 status=404 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "3efd0292"}
{"timestamp": "2026-02-25T04:13:27.316795+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "d74b23f0"}
{"timestamp": "2026-02-25T04:13:27.317795+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "d74b23f0"}
{"timestamp": "2026-02-25T04:13:29.373771+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers/勇哥说财经 - 抖音", "module": "logging", "function": "dispatch", "line": 24, "request_id": "6e8ffb48"}
{"timestamp": "2026-02-25T04:13:29.373771+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers/勇哥说财经 - 抖音 status=200 duration=0.000s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "6e8ffb48"}
{"timestamp": "2026-02-25T04:13:31.444338+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers/不存在的XYZ", "module": "logging", "function": "dispatch", "line": 24, "request_id": "4a206f9c"}
{"timestamp": "2026-02-25T04:13:31.444338+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers/不存在的XYZ status=404 duration=0.000s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "4a206f9c"}
{"timestamp": "2026-02-25T04:13:33.500580+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "f43dc683"}
{"timestamp": "2026-02-25T04:13:33.502580+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Created user: 0dab6260-5b3a-4636-80bb-686d0b2be012 (pytest_history_tmp)", "module": "user_repository", "function": "create", "line": 49}
{"timestamp": "2026-02-25T04:13:33.502580+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/users status=200 duration=0.003s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "f43dc683"}
{"timestamp": "2026-02-25T04:13:35.590516+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "0680ec46"}
{"timestamp": "2026-02-25T04:13:35.592514+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.003s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "0680ec46"}
{"timestamp": "2026-02-25T04:13:37.661741+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/history/0dab6260-5b3a-4636-80bb-686d0b2be012/勇哥说财经 - 抖音", "module": "logging", "function": "dispatch", "line": 24, "request_id": "3ae17ef2"}
{"timestamp": "2026-02-25T04:13:37.663741+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/history/0dab6260-5b3a-4636-80bb-686d0b2be012/勇哥说财经 - 抖音 status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "3ae17ef2"}
{"timestamp": "2026-02-25T04:13:39.686073+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: DELETE /api/soul/users/0dab6260-5b3a-4636-80bb-686d0b2be012", "module": "logging", "function": "dispatch", "line": 24, "request_id": "fec8b3f6"}
{"timestamp": "2026-02-25T04:13:39.699070+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Deleted user: 0dab6260-5b3a-4636-80bb-686d0b2be012", "module": "user_repository", "function": "delete", "line": 70}
{"timestamp": "2026-02-25T04:13:39.699070+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: DELETE /api/soul/users/0dab6260-5b3a-4636-80bb-686d0b2be012 status=200 duration=0.013s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "fec8b3f6"}
{"timestamp": "2026-02-25T04:13:41.759517+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "57e65705"}
{"timestamp": "2026-02-25T04:13:41.762735+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Created user: 80d5d583-b6f9-4201-8f9b-aa1afebad5e2 (pytest_history_tmp)", "module": "user_repository", "function": "create", "line": 49}
{"timestamp": "2026-02-25T04:13:41.762735+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/users status=200 duration=0.003s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "57e65705"}
{"timestamp": "2026-02-25T04:13:43.791198+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "3d0d8d01"}
{"timestamp": "2026-02-25T04:13:43.792197+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "3d0d8d01"}
{"timestamp": "2026-02-25T04:13:45.848376+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/history/80d5d583-b6f9-4201-8f9b-aa1afebad5e2/勇哥说财经 - 抖音", "module": "logging", "function": "dispatch", "line": 24, "request_id": "f461a8a5"}
{"timestamp": "2026-02-25T04:13:45.848376+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/history/80d5d583-b6f9-4201-8f9b-aa1afebad5e2/勇哥说财经 - 抖音 status=200 duration=0.000s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "f461a8a5"}
{"timestamp": "2026-02-25T04:13:47.903106+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: DELETE /api/soul/users/80d5d583-b6f9-4201-8f9b-aa1afebad5e2", "module": "logging", "function": "dispatch", "line": 24, "request_id": "acd4f365"}
{"timestamp": "2026-02-25T04:13:47.916106+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Deleted user: 80d5d583-b6f9-4201-8f9b-aa1afebad5e2", "module": "user_repository", "function": "delete", "line": 70}
{"timestamp": "2026-02-25T04:13:47.916106+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: DELETE /api/soul/users/80d5d583-b6f9-4201-8f9b-aa1afebad5e2 status=200 duration=0.013s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "acd4f365"}
{"timestamp": "2026-02-25T04:13:49.948750+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "b164f790"}
{"timestamp": "2026-02-25T04:13:49.951753+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Created user: 4ed25b9b-250e-40ac-8808-a573ba2259aa (pytest_chat_tmp)", "module": "user_repository", "function": "create", "line": 49}
{"timestamp": "2026-02-25T04:13:49.951753+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/users status=200 duration=0.003s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "b164f790"}
{"timestamp": "2026-02-25T04:13:52.005668+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "8d749d7a"}
{"timestamp": "2026-02-25T04:13:52.006669+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "8d749d7a"}
{"timestamp": "2026-02-25T04:13:54.065029+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/chat", "module": "logging", "function": "dispatch", "line": 24, "request_id": "79c26413"}
{"timestamp": "2026-02-25T04:13:54.066030+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/chat status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "79c26413"}
{"timestamp": "2026-02-25T04:13:54.092132+00:00", "level": "INFO", "logger": "core.graph.nodes.load_context", "message": "Loaded context: user=pytest_chat_tmp, persona=勇哥说财经 - 抖音, today_msgs=0, memories=0", "module": "load_context", "function": "load_context", "line": 44}
{"timestamp": "2026-02-25T04:13:54.381122+00:00", "level": "ERROR", "logger": "services.llm_service", "message": "LLM generation failed: 400 API key expired. Please renew the API key. [reason: \"API_KEY_INVALID\"\ndomain: \"googleapis.com\"\nmetadata {\n  key: \"service\"\n  value: \"generativelanguage.googleapis.com\"\n}\n, locale: \"en-US\"\nmessage: \"API key expired. Please renew the API key.\"\n]", "module": "llm_service", "function": "generate", "line": 55}
{"timestamp": "2026-02-25T04:13:54.381122+00:00", "level": "WARNING", "logger": "services.analysis_service", "message": "Intent analysis failed, using defaults: Generation failed: 400 API key expired. Please renew the API key. [reason: \"API_KEY_INVALID\"\ndomain: \"googleapis.com\"\nmetadata {\n  key: \"service\"\n  value: \"generativelanguage.googleapis.com\"\n}\n, locale: \"en-US\"\nmessage: \"API key expired. Please renew the API key.\"\n]", "module": "analysis_service", "function": "analyze_intent", "line": 75}
{"timestamp": "2026-02-25T04:13:54.381122+00:00", "level": "INFO", "logger": "core.graph.nodes.analyze_message", "message": "Intent analysis: intent=greeting, knowledge=False, memory=False", "module": "analyze_message", "function": "analyze_message", "line": 28}
{"timestamp": "2026-02-25T04:13:54.796306+00:00", "level": "ERROR", "logger": "services.llm_service", "message": "LLM generation failed: 400 API key expired. Please renew the API key. [reason: \"API_KEY_INVALID\"\ndomain: \"googleapis.com\"\nmetadata {\n  key: \"service\"\n  value: \"generativelanguage.googleapis.com\"\n}\n, locale: \"en-US\"\nmessage: \"API key expired. Please renew the API key.\"\n]", "module": "llm_service", "function": "generate", "line": 55}
{"timestamp": "2026-02-25T04:13:54.797306+00:00", "level": "ERROR", "logger": "api.routes.chat", "message": "Chat error: Generation failed: 400 API key expired. Please renew the API key. [reason: \"API_KEY_INVALID\"\ndomain: \"googleapis.com\"\nmetadata {\n  key: \"service\"\n  value: \"generativelanguage.googleapis.com\"\n}\n, locale: \"en-US\"\nmessage: \"API key expired. Please renew the API key.\"\n]", "module": "chat", "function": "event_stream", "line": 49, "exception": "Traceback (most recent call last):\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\grpc_helpers_async.py\", line 86, in __await__\n    response = yield from self._call.__await__()\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\grpc\\aio\\_interceptor.py\", line 474, in __await__\n    response = yield from call.__await__()\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\grpc\\aio\\_call.py\", line 327, in __await__\n    raise _create_rpc_error(\ngrpc.aio._call.AioRpcError: <AioRpcError of RPC that terminated with:\n\tstatus = StatusCode.INVALID_ARGUMENT\n\tdetails = \"API key expired. Please renew the API key.\"\n\tdebug_error_string = \"UNKNOWN:Error received from peer ipv4:142.250.124.95:443 {grpc_message:\"API key expired. Please renew the API key.\", grpc_status:3}\"\n>\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\services\\llm_service.py\", line 46, in generate\n    response = await chat.send_message_async(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\generativeai\\generative_models.py\", line 707, in send_message_async\n    response = await self.model.generate_content_async(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\generativeai\\generative_models.py\", line 385, in generate_content_async\n    response = await self._async_client.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\ai\\generativelanguage_v1beta\\services\\generative_service\\async_client.py\", line 440, in generate_content\n    response = await rpc(\n               ^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\retry\\retry_unary_async.py\", line 231, in retry_wrapped_func\n    return await retry_target(\n           ^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\retry\\retry_unary_async.py\", line 163, in retry_target\n    next_sleep = _retry_error_helper(\n                 ^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\retry\\retry_base.py\", line 216, in _retry_error_helper\n    raise final_exc from source_exc\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\retry\\retry_unary_async.py\", line 158, in retry_target\n    return await target()\n           ^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\grpc_helpers_async.py\", line 89, in __await__\n    raise exceptions.from_grpc_error(rpc_error) from rpc_error\ngoogle.api_core.exceptions.InvalidArgument: 400 API key expired. Please renew the API key. [reason: \"API_KEY_INVALID\"\ndomain: \"googleapis.com\"\nmetadata {\n  key: \"service\"\n  value: \"generativelanguage.googleapis.com\"\n}\n, locale: \"en-US\"\nmessage: \"API key expired. Please renew the API key.\"\n]\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\api\\routes\\chat.py\", line 34, in event_stream\n    async for event in engine.chat_stream(\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\engine.py\", line 146, in chat_stream\n    result = await self.chat(user_id, blogger_name, message, model)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\engine.py\", line 122, in chat\n    result = await self._compiled_graph.ainvoke(initial_state)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\main.py\", line 3161, in ainvoke\n    async for chunk in self.astream(\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\main.py\", line 2974, in astream\n    async for _ in runner.atick(\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\_runner.py\", line 304, in atick\n    await arun_with_retry(\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\_retry.py\", line 138, in arun_with_retry\n    return await task.proc.ainvoke(task.input, config)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\_internal\\_runnable.py\", line 705, in ainvoke\n    input = await asyncio.create_task(\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\_internal\\_runnable.py\", line 473, in ainvoke\n    ret = await self.afunc(*args, **kwargs)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\graph\\workflow.py\", line 38, in wrapped\n    return await fn(state, **deps)\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\graph\\nodes\\greeting_flow.py\", line 51, in greeting_flow\n    response = await generation_service.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\services\\generation_service.py\", line 90, in generate\n    return await self._llm.generate(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\services\\llm_service.py\", line 56, in generate\n    raise LLMError(f\"Generation failed: {e}\")\ncommon.exceptions.LLMError: Generation failed: 400 API key expired. Please renew the API key. [reason: \"API_KEY_INVALID\"\ndomain: \"googleapis.com\"\nmetadata {\n  key: \"service\"\n  value: \"generativelanguage.googleapis.com\"\n}\n, locale: \"en-US\"\nmessage: \"API key expired. Please renew the API key.\"\n]\nDuring task with name 'greeting' and id '2cdcee6c-0649-4aa9-6b3d-8c7000debb46'"}
{"timestamp": "2026-02-25T04:13:56.906127+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: DELETE /api/soul/users/4ed25b9b-250e-40ac-8808-a573ba2259aa", "module": "logging", "function": "dispatch", "line": 24, "request_id": "6afcd28a"}
{"timestamp": "2026-02-25T04:13:56.915129+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Deleted user: 4ed25b9b-250e-40ac-8808-a573ba2259aa", "module": "user_repository", "function": "delete", "line": 70}
{"timestamp": "2026-02-25T04:13:56.915129+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: DELETE /api/soul/users/4ed25b9b-250e-40ac-8808-a573ba2259aa status=200 duration=0.009s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "6afcd28a"}
{"timestamp": "2026-02-25T04:13:58.960008+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "c58619d4"}
{"timestamp": "2026-02-25T04:13:58.964006+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Created user: 7e315ff6-61a8-4931-8c73-c3b9d84ada0e (pytest_chat_tmp)", "module": "user_repository", "function": "create", "line": 49}
{"timestamp": "2026-02-25T04:13:58.965007+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/users status=200 duration=0.005s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "c58619d4"}
{"timestamp": "2026-02-25T04:14:01.014018+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "4bcc0313"}
{"timestamp": "2026-02-25T04:14:01.014018+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "4bcc0313"}
{"timestamp": "2026-02-25T04:14:03.057853+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/chat", "module": "logging", "function": "dispatch", "line": 24, "request_id": "858febf7"}
{"timestamp": "2026-02-25T04:14:03.058857+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/chat status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "858febf7"}
{"timestamp": "2026-02-25T04:14:03.079115+00:00", "level": "INFO", "logger": "core.graph.nodes.load_context", "message": "Loaded context: user=pytest_chat_tmp, persona=勇哥说财经 - 抖音, today_msgs=0, memories=0", "module": "load_context", "function": "load_context", "line": 44}
{"timestamp": "2026-02-25T04:14:03.219646+00:00", "level": "ERROR", "logger": "services.llm_service", "message": "LLM generation failed: 400 API key expired. Please renew the API key. [reason: \"API_KEY_INVALID\"\ndomain: \"googleapis.com\"\nmetadata {\n  key: \"service\"\n  value: \"generativelanguage.googleapis.com\"\n}\n, locale: \"en-US\"\nmessage: \"API key expired. Please renew the API key.\"\n]", "module": "llm_service", "function": "generate", "line": 55}
{"timestamp": "2026-02-25T04:14:03.219646+00:00", "level": "WARNING", "logger": "services.analysis_service", "message": "Intent analysis failed, using defaults: Generation failed: 400 API key expired. Please renew the API key. [reason: \"API_KEY_INVALID\"\ndomain: \"googleapis.com\"\nmetadata {\n  key: \"service\"\n  value: \"generativelanguage.googleapis.com\"\n}\n, locale: \"en-US\"\nmessage: \"API key expired. Please renew the API key.\"\n]", "module": "analysis_service", "function": "analyze_intent", "line": 75}
{"timestamp": "2026-02-25T04:14:03.219646+00:00", "level": "INFO", "logger": "core.graph.nodes.analyze_message", "message": "Intent analysis: intent=chat, knowledge=False, memory=False", "module": "analyze_message", "function": "analyze_message", "line": 28}
{"timestamp": "2026-02-25T04:14:03.732211+00:00", "level": "ERROR", "logger": "services.llm_service", "message": "LLM generation failed: 400 API key expired. Please renew the API key. [reason: \"API_KEY_INVALID\"\ndomain: \"googleapis.com\"\nmetadata {\n  key: \"service\"\n  value: \"generativelanguage.googleapis.com\"\n}\n, locale: \"en-US\"\nmessage: \"API key expired. Please renew the API key.\"\n]", "module": "llm_service", "function": "generate", "line": 55}
{"timestamp": "2026-02-25T04:14:03.733212+00:00", "level": "ERROR", "logger": "api.routes.chat", "message": "Chat error: Generation failed: 400 API key expired. Please renew the API key. [reason: \"API_KEY_INVALID\"\ndomain: \"googleapis.com\"\nmetadata {\n  key: \"service\"\n  value: \"generativelanguage.googleapis.com\"\n}\n, locale: \"en-US\"\nmessage: \"API key expired. Please renew the API key.\"\n]", "module": "chat", "function": "event_stream", "line": 49, "exception": "Traceback (most recent call last):\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\grpc_helpers_async.py\", line 86, in __await__\n    response = yield from self._call.__await__()\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\grpc\\aio\\_interceptor.py\", line 474, in __await__\n    response = yield from call.__await__()\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\grpc\\aio\\_call.py\", line 327, in __await__\n    raise _create_rpc_error(\ngrpc.aio._call.AioRpcError: <AioRpcError of RPC that terminated with:\n\tstatus = StatusCode.INVALID_ARGUMENT\n\tdetails = \"API key expired. Please renew the API key.\"\n\tdebug_error_string = \"UNKNOWN:Error received from peer ipv4:142.250.124.95:443 {grpc_status:3, grpc_message:\"API key expired. Please renew the API key.\"}\"\n>\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\services\\llm_service.py\", line 46, in generate\n    response = await chat.send_message_async(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\generativeai\\generative_models.py\", line 707, in send_message_async\n    response = await self.model.generate_content_async(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\generativeai\\generative_models.py\", line 385, in generate_content_async\n    response = await self._async_client.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\ai\\generativelanguage_v1beta\\services\\generative_service\\async_client.py\", line 440, in generate_content\n    response = await rpc(\n               ^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\retry\\retry_unary_async.py\", line 231, in retry_wrapped_func\n    return await retry_target(\n           ^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\retry\\retry_unary_async.py\", line 163, in retry_target\n    next_sleep = _retry_error_helper(\n                 ^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\retry\\retry_base.py\", line 216, in _retry_error_helper\n    raise final_exc from source_exc\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\retry\\retry_unary_async.py\", line 158, in retry_target\n    return await target()\n           ^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\grpc_helpers_async.py\", line 89, in __await__\n    raise exceptions.from_grpc_error(rpc_error) from rpc_error\ngoogle.api_core.exceptions.InvalidArgument: 400 API key expired. Please renew the API key. [reason: \"API_KEY_INVALID\"\ndomain: \"googleapis.com\"\nmetadata {\n  key: \"service\"\n  value: \"generativelanguage.googleapis.com\"\n}\n, locale: \"en-US\"\nmessage: \"API key expired. Please renew the API key.\"\n]\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\api\\routes\\chat.py\", line 34, in event_stream\n    async for event in engine.chat_stream(\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\engine.py\", line 146, in chat_stream\n    result = await self.chat(user_id, blogger_name, message, model)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\engine.py\", line 122, in chat\n    result = await self._compiled_graph.ainvoke(initial_state)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\main.py\", line 3161, in ainvoke\n    async for chunk in self.astream(\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\main.py\", line 2974, in astream\n    async for _ in runner.atick(\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\_runner.py\", line 304, in atick\n    await arun_with_retry(\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\_retry.py\", line 138, in arun_with_retry\n    return await task.proc.ainvoke(task.input, config)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\_internal\\_runnable.py\", line 705, in ainvoke\n    input = await asyncio.create_task(\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\_internal\\_runnable.py\", line 473, in ainvoke\n    ret = await self.afunc(*args, **kwargs)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\graph\\workflow.py\", line 38, in wrapped\n    return await fn(state, **deps)\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\graph\\nodes\\generate_response.py\", line 40, in generate_response\n    response = await generation_service.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\services\\generation_service.py\", line 90, in generate\n    return await self._llm.generate(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\services\\llm_service.py\", line 56, in generate\n    raise LLMError(f\"Generation failed: {e}\")\ncommon.exceptions.LLMError: Generation failed: 400 API key expired. Please renew the API key. [reason: \"API_KEY_INVALID\"\ndomain: \"googleapis.com\"\nmetadata {\n  key: \"service\"\n  value: \"generativelanguage.googleapis.com\"\n}\n, locale: \"en-US\"\nmessage: \"API key expired. Please renew the API key.\"\n]\nDuring task with name 'generate' and id '50bad58c-7a3c-b002-edf6-3ba90d420e58'"}
{"timestamp": "2026-02-25T04:14:05.801151+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: DELETE /api/soul/users/7e315ff6-61a8-4931-8c73-c3b9d84ada0e", "module": "logging", "function": "dispatch", "line": 24, "request_id": "97cfa740"}
{"timestamp": "2026-02-25T04:14:05.810154+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Deleted user: 7e315ff6-61a8-4931-8c73-c3b9d84ada0e", "module": "user_repository", "function": "delete", "line": 70}
{"timestamp": "2026-02-25T04:14:05.810154+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: DELETE /api/soul/users/7e315ff6-61a8-4931-8c73-c3b9d84ada0e status=200 duration=0.009s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "97cfa740"}
{"timestamp": "2026-02-25T04:14:07.886485+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "4cc90f31"}
{"timestamp": "2026-02-25T04:14:07.889488+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Created user: a363a520-50d9-46df-9154-095dc56684fe (pytest_chat_tmp)", "module": "user_repository", "function": "create", "line": 49}
{"timestamp": "2026-02-25T04:14:07.889488+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/users status=200 duration=0.003s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "4cc90f31"}
{"timestamp": "2026-02-25T04:14:09.955631+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "b6b97307"}
{"timestamp": "2026-02-25T04:14:09.956633+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "b6b97307"}
{"timestamp": "2026-02-25T04:14:11.997213+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/chat", "module": "logging", "function": "dispatch", "line": 24, "request_id": "bd208847"}
{"timestamp": "2026-02-25T04:14:11.999214+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/chat status=200 duration=0.002s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "bd208847"}
{"timestamp": "2026-02-25T04:14:14.072112+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: DELETE /api/soul/users/a363a520-50d9-46df-9154-095dc56684fe", "module": "logging", "function": "dispatch", "line": 24, "request_id": "ab7a8239"}
{"timestamp": "2026-02-25T04:14:14.084616+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Deleted user: a363a520-50d9-46df-9154-095dc56684fe", "module": "user_repository", "function": "delete", "line": 70}
{"timestamp": "2026-02-25T04:14:14.085617+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: DELETE /api/soul/users/a363a520-50d9-46df-9154-095dc56684fe status=200 duration=0.014s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "ab7a8239"}
{"timestamp": "2026-02-25T04:14:16.132197+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "49e910eb"}
{"timestamp": "2026-02-25T04:14:16.139190+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Created user: d8f22903-aa4d-45eb-a040-052293cfa05d (pytest_chat_tmp)", "module": "user_repository", "function": "create", "line": 49}
{"timestamp": "2026-02-25T04:14:16.139190+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/users status=200 duration=0.007s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "49e910eb"}
{"timestamp": "2026-02-25T04:14:18.178014+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "914453ee"}
{"timestamp": "2026-02-25T04:14:18.180012+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.002s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "914453ee"}
{"timestamp": "2026-02-25T04:14:20.267429+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/chat", "module": "logging", "function": "dispatch", "line": 24, "request_id": "7fe996b0"}
{"timestamp": "2026-02-25T04:14:20.267429+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/chat status=200 duration=0.000s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "7fe996b0"}
{"timestamp": "2026-02-25T04:14:22.323591+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: DELETE /api/soul/users/d8f22903-aa4d-45eb-a040-052293cfa05d", "module": "logging", "function": "dispatch", "line": 24, "request_id": "cc21eb4b"}
{"timestamp": "2026-02-25T04:14:22.333592+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Deleted user: d8f22903-aa4d-45eb-a040-052293cfa05d", "module": "user_repository", "function": "delete", "line": 70}
{"timestamp": "2026-02-25T04:14:22.333592+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: DELETE /api/soul/users/d8f22903-aa4d-45eb-a040-052293cfa05d status=200 duration=0.010s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "cc21eb4b"}
{"timestamp": "2026-02-25T04:14:24.384680+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "fe8c66ea"}
{"timestamp": "2026-02-25T04:14:24.387679+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Created user: 4f41606a-1d64-4f99-9458-eee47d736129 (pytest_chat_tmp)", "module": "user_repository", "function": "create", "line": 49}
{"timestamp": "2026-02-25T04:14:24.387679+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/users status=200 duration=0.004s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "fe8c66ea"}
{"timestamp": "2026-02-25T04:14:26.455284+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "f130a1b6"}
{"timestamp": "2026-02-25T04:14:26.456283+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "f130a1b6"}
{"timestamp": "2026-02-25T04:14:28.511325+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/chat", "module": "logging", "function": "dispatch", "line": 24, "request_id": "18ac66bd"}
{"timestamp": "2026-02-25T04:14:28.512324+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/chat status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "18ac66bd"}
{"timestamp": "2026-02-25T04:14:28.534323+00:00", "level": "INFO", "logger": "core.graph.nodes.load_context", "message": "Loaded context: user=pytest_chat_tmp, persona=勇哥说财经 - 抖音, today_msgs=0, memories=0", "module": "load_context", "function": "load_context", "line": 44}
{"timestamp": "2026-02-25T04:14:28.689574+00:00", "level": "ERROR", "logger": "services.llm_service", "message": "LLM generation failed: 403 Your API key was reported as leaked. Please use another API key.", "module": "llm_service", "function": "generate", "line": 55}
{"timestamp": "2026-02-25T04:14:28.689574+00:00", "level": "WARNING", "logger": "services.analysis_service", "message": "Intent analysis failed, using defaults: Generation failed: 403 Your API key was reported as leaked. Please use another API key.", "module": "analysis_service", "function": "analyze_intent", "line": 75}
{"timestamp": "2026-02-25T04:14:28.689574+00:00", "level": "INFO", "logger": "core.graph.nodes.analyze_message", "message": "Intent analysis: intent=chat, knowledge=False, memory=False", "module": "analyze_message", "function": "analyze_message", "line": 28}
{"timestamp": "2026-02-25T04:14:29.080267+00:00", "level": "ERROR", "logger": "services.llm_service", "message": "LLM generation failed: 400 API key expired. Please renew the API key. [reason: \"API_KEY_INVALID\"\ndomain: \"googleapis.com\"\nmetadata {\n  key: \"service\"\n  value: \"generativelanguage.googleapis.com\"\n}\n, locale: \"en-US\"\nmessage: \"API key expired. Please renew the API key.\"\n]", "module": "llm_service", "function": "generate", "line": 55}
{"timestamp": "2026-02-25T04:14:29.083267+00:00", "level": "ERROR", "logger": "api.routes.chat", "message": "Chat error: Generation failed: 400 API key expired. Please renew the API key. [reason: \"API_KEY_INVALID\"\ndomain: \"googleapis.com\"\nmetadata {\n  key: \"service\"\n  value: \"generativelanguage.googleapis.com\"\n}\n, locale: \"en-US\"\nmessage: \"API key expired. Please renew the API key.\"\n]", "module": "chat", "function": "event_stream", "line": 49, "exception": "Traceback (most recent call last):\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\grpc_helpers_async.py\", line 86, in __await__\n    response = yield from self._call.__await__()\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\grpc\\aio\\_interceptor.py\", line 474, in __await__\n    response = yield from call.__await__()\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\grpc\\aio\\_call.py\", line 327, in __await__\n    raise _create_rpc_error(\ngrpc.aio._call.AioRpcError: <AioRpcError of RPC that terminated with:\n\tstatus = StatusCode.INVALID_ARGUMENT\n\tdetails = \"API key expired. Please renew the API key.\"\n\tdebug_error_string = \"UNKNOWN:Error received from peer ipv4:142.250.124.95:443 {grpc_status:3, grpc_message:\"API key expired. Please renew the API key.\"}\"\n>\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\services\\llm_service.py\", line 46, in generate\n    response = await chat.send_message_async(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\generativeai\\generative_models.py\", line 707, in send_message_async\n    response = await self.model.generate_content_async(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\generativeai\\generative_models.py\", line 385, in generate_content_async\n    response = await self._async_client.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\ai\\generativelanguage_v1beta\\services\\generative_service\\async_client.py\", line 440, in generate_content\n    response = await rpc(\n               ^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\retry\\retry_unary_async.py\", line 231, in retry_wrapped_func\n    return await retry_target(\n           ^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\retry\\retry_unary_async.py\", line 163, in retry_target\n    next_sleep = _retry_error_helper(\n                 ^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\retry\\retry_base.py\", line 216, in _retry_error_helper\n    raise final_exc from source_exc\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\retry\\retry_unary_async.py\", line 158, in retry_target\n    return await target()\n           ^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\grpc_helpers_async.py\", line 89, in __await__\n    raise exceptions.from_grpc_error(rpc_error) from rpc_error\ngoogle.api_core.exceptions.InvalidArgument: 400 API key expired. Please renew the API key. [reason: \"API_KEY_INVALID\"\ndomain: \"googleapis.com\"\nmetadata {\n  key: \"service\"\n  value: \"generativelanguage.googleapis.com\"\n}\n, locale: \"en-US\"\nmessage: \"API key expired. Please renew the API key.\"\n]\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\api\\routes\\chat.py\", line 34, in event_stream\n    async for event in engine.chat_stream(\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\engine.py\", line 146, in chat_stream\n    result = await self.chat(user_id, blogger_name, message, model)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\engine.py\", line 122, in chat\n    result = await self._compiled_graph.ainvoke(initial_state)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\main.py\", line 3161, in ainvoke\n    async for chunk in self.astream(\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\main.py\", line 2974, in astream\n    async for _ in runner.atick(\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\_runner.py\", line 304, in atick\n    await arun_with_retry(\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\_retry.py\", line 138, in arun_with_retry\n    return await task.proc.ainvoke(task.input, config)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\_internal\\_runnable.py\", line 705, in ainvoke\n    input = await asyncio.create_task(\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\_internal\\_runnable.py\", line 473, in ainvoke\n    ret = await self.afunc(*args, **kwargs)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\graph\\workflow.py\", line 38, in wrapped\n    return await fn(state, **deps)\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\graph\\nodes\\generate_response.py\", line 40, in generate_response\n    response = await generation_service.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\services\\generation_service.py\", line 90, in generate\n    return await self._llm.generate(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\services\\llm_service.py\", line 56, in generate\n    raise LLMError(f\"Generation failed: {e}\")\ncommon.exceptions.LLMError: Generation failed: 400 API key expired. Please renew the API key. [reason: \"API_KEY_INVALID\"\ndomain: \"googleapis.com\"\nmetadata {\n  key: \"service\"\n  value: \"generativelanguage.googleapis.com\"\n}\n, locale: \"en-US\"\nmessage: \"API key expired. Please renew the API key.\"\n]\nDuring task with name 'generate' and id '73d95db1-a58c-b4a8-0544-481bcda3700d'"}
{"timestamp": "2026-02-25T04:14:31.161385+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: DELETE /api/soul/users/4f41606a-1d64-4f99-9458-eee47d736129", "module": "logging", "function": "dispatch", "line": 24, "request_id": "28cff3fb"}
{"timestamp": "2026-02-25T04:14:31.170385+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Deleted user: 4f41606a-1d64-4f99-9458-eee47d736129", "module": "user_repository", "function": "delete", "line": 70}
{"timestamp": "2026-02-25T04:14:31.170385+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: DELETE /api/soul/users/4f41606a-1d64-4f99-9458-eee47d736129 status=200 duration=0.009s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "28cff3fb"}
{"timestamp": "2026-02-25T04:14:33.234047+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "26139454"}
{"timestamp": "2026-02-25T04:14:33.237048+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Created user: 47618e0c-aca4-4c4e-85ea-d4fca9fd47a0 (pytest_e2e)", "module": "user_repository", "function": "create", "line": 49}
{"timestamp": "2026-02-25T04:14:33.237048+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/users status=200 duration=0.003s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "26139454"}
{"timestamp": "2026-02-25T04:14:35.291552+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "f9fa4bb7"}
{"timestamp": "2026-02-25T04:14:35.291552+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "f9fa4bb7"}
{"timestamp": "2026-02-25T04:14:37.356122+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers/勇哥说财经 - 抖音", "module": "logging", "function": "dispatch", "line": 24, "request_id": "02f3d22a"}
{"timestamp": "2026-02-25T04:14:37.356122+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers/勇哥说财经 - 抖音 status=200 duration=0.000s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "02f3d22a"}
{"timestamp": "2026-02-25T04:14:39.409093+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/history/47618e0c-aca4-4c4e-85ea-d4fca9fd47a0/勇哥说财经 - 抖音", "module": "logging", "function": "dispatch", "line": 24, "request_id": "726aef70"}
{"timestamp": "2026-02-25T04:14:39.410093+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/history/47618e0c-aca4-4c4e-85ea-d4fca9fd47a0/勇哥说财经 - 抖音 status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "726aef70"}
{"timestamp": "2026-02-25T04:14:41.457647+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/chat", "module": "logging", "function": "dispatch", "line": 24, "request_id": "c8058ce4"}
{"timestamp": "2026-02-25T04:14:41.457647+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/chat status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "c8058ce4"}
{"timestamp": "2026-02-25T04:14:41.477645+00:00", "level": "INFO", "logger": "core.graph.nodes.load_context", "message": "Loaded context: user=pytest_e2e, persona=勇哥说财经 - 抖音, today_msgs=0, memories=0", "module": "load_context", "function": "load_context", "line": 44}
{"timestamp": "2026-02-25T04:14:41.622804+00:00", "level": "ERROR", "logger": "services.llm_service", "message": "LLM generation failed: 400 API key expired. Please renew the API key. [reason: \"API_KEY_INVALID\"\ndomain: \"googleapis.com\"\nmetadata {\n  key: \"service\"\n  value: \"generativelanguage.googleapis.com\"\n}\n, locale: \"en-US\"\nmessage: \"API key expired. Please renew the API key.\"\n]", "module": "llm_service", "function": "generate", "line": 55}
{"timestamp": "2026-02-25T04:14:41.622804+00:00", "level": "WARNING", "logger": "services.analysis_service", "message": "Intent analysis failed, using defaults: Generation failed: 400 API key expired. Please renew the API key. [reason: \"API_KEY_INVALID\"\ndomain: \"googleapis.com\"\nmetadata {\n  key: \"service\"\n  value: \"generativelanguage.googleapis.com\"\n}\n, locale: \"en-US\"\nmessage: \"API key expired. Please renew the API key.\"\n]", "module": "analysis_service", "function": "analyze_intent", "line": 75}
{"timestamp": "2026-02-25T04:14:41.622804+00:00", "level": "INFO", "logger": "core.graph.nodes.analyze_message", "message": "Intent analysis: intent=greeting, knowledge=False, memory=False", "module": "analyze_message", "function": "analyze_message", "line": 28}
{"timestamp": "2026-02-25T04:14:42.019803+00:00", "level": "ERROR", "logger": "services.llm_service", "message": "LLM generation failed: 400 API key expired. Please renew the API key. [reason: \"API_KEY_INVALID\"\ndomain: \"googleapis.com\"\nmetadata {\n  key: \"service\"\n  value: \"generativelanguage.googleapis.com\"\n}\n, locale: \"en-US\"\nmessage: \"API key expired. Please renew the API key.\"\n]", "module": "llm_service", "function": "generate", "line": 55}
{"timestamp": "2026-02-25T04:14:42.020803+00:00", "level": "ERROR", "logger": "api.routes.chat", "message": "Chat error: Generation failed: 400 API key expired. Please renew the API key. [reason: \"API_KEY_INVALID\"\ndomain: \"googleapis.com\"\nmetadata {\n  key: \"service\"\n  value: \"generativelanguage.googleapis.com\"\n}\n, locale: \"en-US\"\nmessage: \"API key expired. Please renew the API key.\"\n]", "module": "chat", "function": "event_stream", "line": 49, "exception": "Traceback (most recent call last):\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\grpc_helpers_async.py\", line 86, in __await__\n    response = yield from self._call.__await__()\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\grpc\\aio\\_interceptor.py\", line 474, in __await__\n    response = yield from call.__await__()\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\grpc\\aio\\_call.py\", line 327, in __await__\n    raise _create_rpc_error(\ngrpc.aio._call.AioRpcError: <AioRpcError of RPC that terminated with:\n\tstatus = StatusCode.INVALID_ARGUMENT\n\tdetails = \"API key expired. Please renew the API key.\"\n\tdebug_error_string = \"UNKNOWN:Error received from peer ipv4:142.250.124.95:443 {grpc_status:3, grpc_message:\"API key expired. Please renew the API key.\"}\"\n>\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\services\\llm_service.py\", line 46, in generate\n    response = await chat.send_message_async(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\generativeai\\generative_models.py\", line 707, in send_message_async\n    response = await self.model.generate_content_async(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\generativeai\\generative_models.py\", line 385, in generate_content_async\n    response = await self._async_client.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\ai\\generativelanguage_v1beta\\services\\generative_service\\async_client.py\", line 440, in generate_content\n    response = await rpc(\n               ^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\retry\\retry_unary_async.py\", line 231, in retry_wrapped_func\n    return await retry_target(\n           ^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\retry\\retry_unary_async.py\", line 163, in retry_target\n    next_sleep = _retry_error_helper(\n                 ^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\retry\\retry_base.py\", line 216, in _retry_error_helper\n    raise final_exc from source_exc\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\retry\\retry_unary_async.py\", line 158, in retry_target\n    return await target()\n           ^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\api_core\\grpc_helpers_async.py\", line 89, in __await__\n    raise exceptions.from_grpc_error(rpc_error) from rpc_error\ngoogle.api_core.exceptions.InvalidArgument: 400 API key expired. Please renew the API key. [reason: \"API_KEY_INVALID\"\ndomain: \"googleapis.com\"\nmetadata {\n  key: \"service\"\n  value: \"generativelanguage.googleapis.com\"\n}\n, locale: \"en-US\"\nmessage: \"API key expired. Please renew the API key.\"\n]\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\api\\routes\\chat.py\", line 34, in event_stream\n    async for event in engine.chat_stream(\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\engine.py\", line 146, in chat_stream\n    result = await self.chat(user_id, blogger_name, message, model)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\engine.py\", line 122, in chat\n    result = await self._compiled_graph.ainvoke(initial_state)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\main.py\", line 3161, in ainvoke\n    async for chunk in self.astream(\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\main.py\", line 2974, in astream\n    async for _ in runner.atick(\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\_runner.py\", line 304, in atick\n    await arun_with_retry(\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\_retry.py\", line 138, in arun_with_retry\n    return await task.proc.ainvoke(task.input, config)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\_internal\\_runnable.py\", line 705, in ainvoke\n    input = await asyncio.create_task(\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\_internal\\_runnable.py\", line 473, in ainvoke\n    ret = await self.afunc(*args, **kwargs)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\graph\\workflow.py\", line 38, in wrapped\n    return await fn(state, **deps)\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\graph\\nodes\\greeting_flow.py\", line 51, in greeting_flow\n    response = await generation_service.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\services\\generation_service.py\", line 90, in generate\n    return await self._llm.generate(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\services\\llm_service.py\", line 56, in generate\n    raise LLMError(f\"Generation failed: {e}\")\ncommon.exceptions.LLMError: Generation failed: 400 API key expired. Please renew the API key. [reason: \"API_KEY_INVALID\"\ndomain: \"googleapis.com\"\nmetadata {\n  key: \"service\"\n  value: \"generativelanguage.googleapis.com\"\n}\n, locale: \"en-US\"\nmessage: \"API key expired. Please renew the API key.\"\n]\nDuring task with name 'greeting' and id '5286f60c-d3ad-efca-4d74-0436a80dc137'"}
{"timestamp": "2026-02-25T04:14:44.076092+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: DELETE /api/soul/users/47618e0c-aca4-4c4e-85ea-d4fca9fd47a0", "module": "logging", "function": "dispatch", "line": 24, "request_id": "d3187337"}
{"timestamp": "2026-02-25T04:14:44.085095+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Deleted user: 47618e0c-aca4-4c4e-85ea-d4fca9fd47a0", "module": "user_repository", "function": "delete", "line": 70}
{"timestamp": "2026-02-25T04:14:44.085095+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: DELETE /api/soul/users/47618e0c-aca4-4c4e-85ea-d4fca9fd47a0 status=200 duration=0.009s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "d3187337"}
{"timestamp": "2026-02-25T04:15:11.231757+00:00", "level": "INFO", "logger": "main", "message": "Starting Video-Analysis-Soul...", "module": "main", "function": "lifespan", "line": 28}
{"timestamp": "2026-02-25T04:15:11.232757+00:00", "level": "INFO", "logger": "core.engine", "message": "Starting SoulEngine...", "module": "engine", "function": "start", "line": 50}
{"timestamp": "2026-02-25T04:15:11.232757+00:00", "level": "INFO", "logger": "managers.cache_manager", "message": "Session cache manager started", "module": "cache_manager", "function": "start", "line": 38}
{"timestamp": "2026-02-25T04:15:11.248756+00:00", "level": "INFO", "logger": "services.embedding_service", "message": "Loading embedding model: BAAI/bge-large-zh-v1.5 (device: cuda)", "module": "embedding_service", "function": "initialize", "line": 46}
{"timestamp": "2026-02-25T04:15:11.250756+00:00", "level": "INFO", "logger": "sentence_transformers.SentenceTransformer", "message": "Load pretrained SentenceTransformer: BAAI/bge-large-zh-v1.5", "module": "SentenceTransformer", "function": "__init__", "line": 227}
{"timestamp": "2026-02-25T04:15:15.302593+00:00", "level": "INFO", "logger": "services.embedding_service", "message": "Embedding model loaded: dim=1024", "module": "embedding_service", "function": "initialize", "line": 50}
{"timestamp": "2026-02-25T04:15:15.302593+00:00", "level": "INFO", "logger": "core.graph.workflow", "message": "LangGraph workflow built successfully", "module": "workflow", "function": "build_workflow", "line": 105}
{"timestamp": "2026-02-25T04:15:15.304594+00:00", "level": "INFO", "logger": "core.engine", "message": "SoulEngine started successfully", "module": "engine", "function": "start", "line": 71}
{"timestamp": "2026-02-25T04:15:15.304594+00:00", "level": "INFO", "logger": "main", "message": "Server running on 0.0.0.0:8004", "module": "main", "function": "lifespan", "line": 34}
{"timestamp": "2026-02-25T04:15:15.629362+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/status", "module": "logging", "function": "dispatch", "line": 24, "request_id": "63d95058"}
{"timestamp": "2026-02-25T04:15:15.630361+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/status status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "63d95058"}
{"timestamp": "2026-02-25T04:15:28.331709+00:00", "level": "INFO", "logger": "main", "message": "Starting Video-Analysis-Soul...", "module": "main", "function": "lifespan", "line": 28}
{"timestamp": "2026-02-25T04:15:28.332709+00:00", "level": "INFO", "logger": "core.engine", "message": "Starting SoulEngine...", "module": "engine", "function": "start", "line": 50}
{"timestamp": "2026-02-25T04:15:28.332709+00:00", "level": "INFO", "logger": "managers.cache_manager", "message": "Session cache manager started", "module": "cache_manager", "function": "start", "line": 38}
{"timestamp": "2026-02-25T04:15:28.348709+00:00", "level": "INFO", "logger": "services.embedding_service", "message": "Loading embedding model: BAAI/bge-large-zh-v1.5 (device: cuda)", "module": "embedding_service", "function": "initialize", "line": 46}
{"timestamp": "2026-02-25T04:15:28.350708+00:00", "level": "INFO", "logger": "sentence_transformers.SentenceTransformer", "message": "Load pretrained SentenceTransformer: BAAI/bge-large-zh-v1.5", "module": "SentenceTransformer", "function": "__init__", "line": 227}
{"timestamp": "2026-02-25T04:15:32.454748+00:00", "level": "INFO", "logger": "services.embedding_service", "message": "Embedding model loaded: dim=1024", "module": "embedding_service", "function": "initialize", "line": 50}
{"timestamp": "2026-02-25T04:15:32.455748+00:00", "level": "INFO", "logger": "core.graph.workflow", "message": "LangGraph workflow built successfully", "module": "workflow", "function": "build_workflow", "line": 105}
{"timestamp": "2026-02-25T04:15:32.457748+00:00", "level": "INFO", "logger": "core.engine", "message": "SoulEngine started successfully", "module": "engine", "function": "start", "line": 71}
{"timestamp": "2026-02-25T04:15:32.457748+00:00", "level": "INFO", "logger": "main", "message": "Server running on 0.0.0.0:8004", "module": "main", "function": "lifespan", "line": 34}
{"timestamp": "2026-02-25T04:15:32.457748+00:00", "level": "INFO", "logger": "main", "message": "Shutting down...", "module": "main", "function": "lifespan", "line": 38}
{"timestamp": "2026-02-25T04:15:32.457748+00:00", "level": "INFO", "logger": "core.engine", "message": "Stopping SoulEngine...", "module": "engine", "function": "stop", "line": 75}
{"timestamp": "2026-02-25T04:15:32.457748+00:00", "level": "INFO", "logger": "managers.cache_manager", "message": "Session cache manager stopped", "module": "cache_manager", "function": "stop", "line": 48}
{"timestamp": "2026-02-25T04:15:32.457748+00:00", "level": "INFO", "logger": "managers.persona_manager", "message": "PersonaManager closed", "module": "persona_manager", "function": "close", "line": 326}
{"timestamp": "2026-02-25T04:15:32.457748+00:00", "level": "INFO", "logger": "core.engine", "message": "SoulEngine stopped", "module": "engine", "function": "stop", "line": 78}
{"timestamp": "2026-02-25T04:15:32.863661+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/status", "module": "logging", "function": "dispatch", "line": 24, "request_id": "b457bd65"}
{"timestamp": "2026-02-25T04:15:32.863661+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/status status=200 duration=0.000s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "b457bd65"}
{"timestamp": "2026-02-25T04:15:45.100377+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "3442f4c6"}
{"timestamp": "2026-02-25T04:15:45.105378+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Created user: d2cdae43-f272-4610-a236-3452479e6093 (quick_test)", "module": "user_repository", "function": "create", "line": 49}
{"timestamp": "2026-02-25T04:15:45.105378+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/users status=200 duration=0.006s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "3442f4c6"}
{"timestamp": "2026-02-25T04:15:47.143129+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "f2ebde72"}
{"timestamp": "2026-02-25T04:15:47.144129+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "f2ebde72"}
{"timestamp": "2026-02-25T04:15:49.185169+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/chat", "module": "logging", "function": "dispatch", "line": 24, "request_id": "26d859d0"}
{"timestamp": "2026-02-25T04:15:49.187168+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/chat status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "26d859d0"}
{"timestamp": "2026-02-25T04:15:49.204167+00:00", "level": "INFO", "logger": "managers.persona_manager", "message": "Loaded persona: 勇哥说财经 - 抖音 (videos=39, knowledge=0)", "module": "persona_manager", "function": "load_persona", "line": 68}
{"timestamp": "2026-02-25T04:15:49.210167+00:00", "level": "INFO", "logger": "core.graph.nodes.load_context", "message": "Loaded context: user=quick_test, persona=勇哥说财经 - 抖音, today_msgs=0, memories=0", "module": "load_context", "function": "load_context", "line": 44}
{"timestamp": "2026-02-25T04:15:52.378244+00:00", "level": "ERROR", "logger": "services.llm_service", "message": "LLM generation failed: \n  No API_KEY or ADC found. Please either:\n    - Set the `GOOGLE_API_KEY` environment variable.\n    - Manually pass the key with `genai.configure(api_key=my_api_key)`.\n    - Or set up Application Default Credentials, see https://ai.google.dev/gemini-api/docs/oauth for more information.", "module": "llm_service", "function": "generate", "line": 55}
{"timestamp": "2026-02-25T04:15:52.378244+00:00", "level": "WARNING", "logger": "services.analysis_service", "message": "Intent analysis failed, using defaults: Generation failed: \n  No API_KEY or ADC found. Please either:\n    - Set the `GOOGLE_API_KEY` environment variable.\n    - Manually pass the key with `genai.configure(api_key=my_api_key)`.\n    - Or set up Application Default Credentials, see https://ai.google.dev/gemini-api/docs/oauth for more information.", "module": "analysis_service", "function": "analyze_intent", "line": 75}
{"timestamp": "2026-02-25T04:15:52.378244+00:00", "level": "INFO", "logger": "core.graph.nodes.analyze_message", "message": "Intent analysis: intent=greeting, knowledge=False, memory=False", "module": "analyze_message", "function": "analyze_message", "line": 28}
{"timestamp": "2026-02-25T04:15:55.430892+00:00", "level": "ERROR", "logger": "services.llm_service", "message": "LLM generation failed: \n  No API_KEY or ADC found. Please either:\n    - Set the `GOOGLE_API_KEY` environment variable.\n    - Manually pass the key with `genai.configure(api_key=my_api_key)`.\n    - Or set up Application Default Credentials, see https://ai.google.dev/gemini-api/docs/oauth for more information.", "module": "llm_service", "function": "generate", "line": 55}
{"timestamp": "2026-02-25T04:15:55.446077+00:00", "level": "ERROR", "logger": "api.routes.chat", "message": "Chat error: Generation failed: \n  No API_KEY or ADC found. Please either:\n    - Set the `GOOGLE_API_KEY` environment variable.\n    - Manually pass the key with `genai.configure(api_key=my_api_key)`.\n    - Or set up Application Default Credentials, see https://ai.google.dev/gemini-api/docs/oauth for more information.", "module": "chat", "function": "event_stream", "line": 49, "exception": "Traceback (most recent call last):\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\services\\llm_service.py\", line 46, in generate\n    response = await chat.send_message_async(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\generativeai\\generative_models.py\", line 707, in send_message_async\n    response = await self.model.generate_content_async(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\generativeai\\generative_models.py\", line 371, in generate_content_async\n    self._async_client = client.get_default_generative_async_client()\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\generativeai\\client.py\", line 364, in get_default_generative_async_client\n    return _client_manager.get_default_client(\"generative_async\")\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\generativeai\\client.py\", line 289, in get_default_client\n    client = self.make_client(name)\n             ^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\generativeai\\client.py\", line 249, in make_client\n    raise e\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\generativeai\\client.py\", line 241, in make_client\n    client = cls(**self.client_config)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\ai\\generativelanguage_v1beta\\services\\generative_service\\async_client.py\", line 275, in __init__\n    self._client = GenerativeServiceClient(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\ai\\generativelanguage_v1beta\\services\\generative_service\\client.py\", line 667, in __init__\n    self._transport = transport_init(\n                      ^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\ai\\generativelanguage_v1beta\\services\\generative_service\\transports\\grpc_asyncio.py\", line 283, in __init__\n    super().__init__(\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\ai\\generativelanguage_v1beta\\services\\generative_service\\transports\\base.py\", line 100, in __init__\n    credentials, _ = google.auth.default(\n                     ^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\google\\auth\\_default.py\", line 752, in default\n    raise exceptions.DefaultCredentialsError(_CLOUD_SDK_MISSING_CREDENTIALS)\ngoogle.auth.exceptions.DefaultCredentialsError: \n  No API_KEY or ADC found. Please either:\n    - Set the `GOOGLE_API_KEY` environment variable.\n    - Manually pass the key with `genai.configure(api_key=my_api_key)`.\n    - Or set up Application Default Credentials, see https://ai.google.dev/gemini-api/docs/oauth for more information.\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\api\\routes\\chat.py\", line 34, in event_stream\n    async for event in engine.chat_stream(\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\engine.py\", line 146, in chat_stream\n    result = await self.chat(user_id, blogger_name, message, model)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\engine.py\", line 122, in chat\n    result = await self._compiled_graph.ainvoke(initial_state)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\main.py\", line 3161, in ainvoke\n    async for chunk in self.astream(\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\main.py\", line 2974, in astream\n    async for _ in runner.atick(\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\_runner.py\", line 304, in atick\n    await arun_with_retry(\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\pregel\\_retry.py\", line 138, in arun_with_retry\n    return await task.proc.ainvoke(task.input, config)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\_internal\\_runnable.py\", line 705, in ainvoke\n    input = await asyncio.create_task(\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\ProgramData\\anaconda3\\envs\\video-analysis\\Lib\\site-packages\\langgraph\\_internal\\_runnable.py\", line 473, in ainvoke\n    ret = await self.afunc(*args, **kwargs)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\graph\\workflow.py\", line 38, in wrapped\n    return await fn(state, **deps)\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\core\\graph\\nodes\\greeting_flow.py\", line 51, in greeting_flow\n    response = await generation_service.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\services\\generation_service.py\", line 90, in generate\n    return await self._llm.generate(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-soul\\services\\llm_service.py\", line 56, in generate\n    raise LLMError(f\"Generation failed: {e}\")\ncommon.exceptions.LLMError: Generation failed: \n  No API_KEY or ADC found. Please either:\n    - Set the `GOOGLE_API_KEY` environment variable.\n    - Manually pass the key with `genai.configure(api_key=my_api_key)`.\n    - Or set up Application Default Credentials, see https://ai.google.dev/gemini-api/docs/oauth for more information.\nDuring task with name 'greeting' and id '4d98ada9-f4bd-6c06-13b7-f244cbfe5d38'"}
{"timestamp": "2026-02-25T04:15:57.493180+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: DELETE /api/soul/users/d2cdae43-f272-4610-a236-3452479e6093", "module": "logging", "function": "dispatch", "line": 24, "request_id": "4d348232"}
{"timestamp": "2026-02-25T04:15:57.500180+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Deleted user: d2cdae43-f272-4610-a236-3452479e6093", "module": "user_repository", "function": "delete", "line": 70}
{"timestamp": "2026-02-25T04:15:57.500180+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: DELETE /api/soul/users/d2cdae43-f272-4610-a236-3452479e6093 status=200 duration=0.008s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "4d348232"}
{"timestamp": "2026-02-25T04:23:31.753212+00:00", "level": "INFO", "logger": "main", "message": "Starting Video-Analysis-Soul...", "module": "main", "function": "lifespan", "line": 28}
{"timestamp": "2026-02-25T04:23:31.754212+00:00", "level": "INFO", "logger": "core.engine", "message": "Starting SoulEngine...", "module": "engine", "function": "start", "line": 50}
{"timestamp": "2026-02-25T04:23:31.754212+00:00", "level": "INFO", "logger": "managers.cache_manager", "message": "Session cache manager started", "module": "cache_manager", "function": "start", "line": 38}
{"timestamp": "2026-02-25T04:23:31.770212+00:00", "level": "INFO", "logger": "services.embedding_service", "message": "Loading embedding model: BAAI/bge-large-zh-v1.5 (device: cuda)", "module": "embedding_service", "function": "initialize", "line": 46}
{"timestamp": "2026-02-25T04:23:31.772212+00:00", "level": "INFO", "logger": "sentence_transformers.SentenceTransformer", "message": "Load pretrained SentenceTransformer: BAAI/bge-large-zh-v1.5", "module": "SentenceTransformer", "function": "__init__", "line": 227}
{"timestamp": "2026-02-25T04:23:35.867803+00:00", "level": "INFO", "logger": "services.embedding_service", "message": "Embedding model loaded: dim=1024", "module": "embedding_service", "function": "initialize", "line": 50}
{"timestamp": "2026-02-25T04:23:35.868802+00:00", "level": "INFO", "logger": "core.graph.workflow", "message": "LangGraph workflow built successfully", "module": "workflow", "function": "build_workflow", "line": 105}
{"timestamp": "2026-02-25T04:23:35.870802+00:00", "level": "INFO", "logger": "core.engine", "message": "SoulEngine started successfully", "module": "engine", "function": "start", "line": 71}
{"timestamp": "2026-02-25T04:23:35.870802+00:00", "level": "INFO", "logger": "main", "message": "Server running on 0.0.0.0:8004", "module": "main", "function": "lifespan", "line": 34}
{"timestamp": "2026-02-25T04:23:36.806327+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/status", "module": "logging", "function": "dispatch", "line": 24, "request_id": "585a0d63"}
{"timestamp": "2026-02-25T04:23:36.807325+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/status status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "585a0d63"}
{"timestamp": "2026-02-25T04:23:48.499820+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "e9599060"}
{"timestamp": "2026-02-25T04:23:48.503819+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Created user: 547cf9f0-980b-44fd-852e-bba3292bbc70 (keytest)", "module": "user_repository", "function": "create", "line": 49}
{"timestamp": "2026-02-25T04:23:48.503819+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/users status=200 duration=0.005s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "e9599060"}
{"timestamp": "2026-02-25T04:23:50.543621+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "03aaec4d"}
{"timestamp": "2026-02-25T04:23:50.544621+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.002s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "03aaec4d"}
{"timestamp": "2026-02-25T04:23:52.599959+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/chat", "module": "logging", "function": "dispatch", "line": 24, "request_id": "cae93e26"}
{"timestamp": "2026-02-25T04:23:52.600959+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/chat status=200 duration=0.002s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "cae93e26"}
{"timestamp": "2026-02-25T04:23:52.625966+00:00", "level": "INFO", "logger": "managers.persona_manager", "message": "Loaded persona: 勇哥说财经 - 抖音 (videos=39, knowledge=0)", "module": "persona_manager", "function": "load_persona", "line": 68}
{"timestamp": "2026-02-25T04:23:52.632473+00:00", "level": "INFO", "logger": "core.graph.nodes.load_context", "message": "Loaded context: user=keytest, persona=勇哥说财经 - 抖音, today_msgs=0, memories=0", "module": "load_context", "function": "load_context", "line": 44}
{"timestamp": "2026-02-25T04:23:55.462656+00:00", "level": "INFO", "logger": "core.graph.nodes.analyze_message", "message": "Intent analysis: intent=greeting, knowledge=False, memory=False", "module": "analyze_message", "function": "analyze_message", "line": 28}
{"timestamp": "2026-02-25T04:23:58.599366+00:00", "level": "INFO", "logger": "core.graph.nodes.post_process", "message": "Saved messages: user_id=547cf9f0-980b-44fd-852e-bba3292bbc70, blogger=勇哥说财经 - 抖音, total_messages=2", "module": "post_process", "function": "post_process", "line": 41}
{"timestamp": "2026-02-25T04:24:00.661377+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: DELETE /api/soul/users/547cf9f0-980b-44fd-852e-bba3292bbc70", "module": "logging", "function": "dispatch", "line": 24, "request_id": "43d37d92"}
{"timestamp": "2026-02-25T04:24:00.671378+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Deleted user: 547cf9f0-980b-44fd-852e-bba3292bbc70", "module": "user_repository", "function": "delete", "line": 70}
{"timestamp": "2026-02-25T04:24:00.671378+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: DELETE /api/soul/users/547cf9f0-980b-44fd-852e-bba3292bbc70 status=200 duration=0.010s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "43d37d92"}
{"timestamp": "2026-02-25T04:24:08.121219+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/status", "module": "logging", "function": "dispatch", "line": 24, "request_id": "9c7cb611"}
{"timestamp": "2026-02-25T04:24:08.122213+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/status status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "9c7cb611"}
{"timestamp": "2026-02-25T04:24:10.200327+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/status", "module": "logging", "function": "dispatch", "line": 24, "request_id": "80f2157b"}
{"timestamp": "2026-02-25T04:24:10.201328+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/status status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "80f2157b"}
{"timestamp": "2026-02-25T04:24:12.261385+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/models", "module": "logging", "function": "dispatch", "line": 24, "request_id": "c1287cbd"}
{"timestamp": "2026-02-25T04:24:12.262384+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/models status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "c1287cbd"}
{"timestamp": "2026-02-25T04:24:14.302266+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "dafecc66"}
{"timestamp": "2026-02-25T04:24:14.305266+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Created user: 33a961a0-7c48-481b-bbe9-74e350964923 (pytest_user_1771993452)", "module": "user_repository", "function": "create", "line": 49}
{"timestamp": "2026-02-25T04:24:14.305266+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/users status=200 duration=0.004s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "dafecc66"}
{"timestamp": "2026-02-25T04:24:16.359666+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "3dc178b1"}
{"timestamp": "2026-02-25T04:24:16.369662+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/users status=200 duration=0.011s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "3dc178b1"}
{"timestamp": "2026-02-25T04:24:18.463568+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: DELETE /api/soul/users/33a961a0-7c48-481b-bbe9-74e350964923", "module": "logging", "function": "dispatch", "line": 24, "request_id": "0a3796d4"}
{"timestamp": "2026-02-25T04:24:18.467567+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Deleted user: 33a961a0-7c48-481b-bbe9-74e350964923", "module": "user_repository", "function": "delete", "line": 70}
{"timestamp": "2026-02-25T04:24:18.467567+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: DELETE /api/soul/users/33a961a0-7c48-481b-bbe9-74e350964923 status=200 duration=0.005s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "0a3796d4"}
{"timestamp": "2026-02-25T04:24:20.536819+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "27276f8b"}
{"timestamp": "2026-02-25T04:24:20.537819+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/users status=200 duration=0.002s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "27276f8b"}
{"timestamp": "2026-02-25T04:24:22.607686+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: DELETE /api/soul/users/nonexistent-id-12345", "module": "logging", "function": "dispatch", "line": 24, "request_id": "b47ec2aa"}
{"timestamp": "2026-02-25T04:24:22.608686+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: DELETE /api/soul/users/nonexistent-id-12345 status=404 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "b47ec2aa"}
{"timestamp": "2026-02-25T04:24:24.671784+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "1b3998a4"}
{"timestamp": "2026-02-25T04:24:24.672786+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "1b3998a4"}
{"timestamp": "2026-02-25T04:24:26.742029+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers/勇哥说财经 - 抖音", "module": "logging", "function": "dispatch", "line": 24, "request_id": "0342a6e9"}
{"timestamp": "2026-02-25T04:24:26.742029+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers/勇哥说财经 - 抖音 status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "0342a6e9"}
{"timestamp": "2026-02-25T04:24:28.795380+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers/不存在的XYZ", "module": "logging", "function": "dispatch", "line": 24, "request_id": "855ba009"}
{"timestamp": "2026-02-25T04:24:28.795380+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers/不存在的XYZ status=404 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "855ba009"}
{"timestamp": "2026-02-25T04:24:30.857977+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "2243d1e8"}
{"timestamp": "2026-02-25T04:24:30.860977+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Created user: ee14913b-d59b-45b1-96b3-592e36e4b098 (pytest_history_tmp)", "module": "user_repository", "function": "create", "line": 49}
{"timestamp": "2026-02-25T04:24:30.860977+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/users status=200 duration=0.003s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "2243d1e8"}
{"timestamp": "2026-02-25T04:24:32.903390+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "07f6d0b2"}
{"timestamp": "2026-02-25T04:24:32.904389+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "07f6d0b2"}
{"timestamp": "2026-02-25T04:24:34.946558+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/history/ee14913b-d59b-45b1-96b3-592e36e4b098/勇哥说财经 - 抖音", "module": "logging", "function": "dispatch", "line": 24, "request_id": "7713989e"}
{"timestamp": "2026-02-25T04:24:34.947557+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/history/ee14913b-d59b-45b1-96b3-592e36e4b098/勇哥说财经 - 抖音 status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "7713989e"}
{"timestamp": "2026-02-25T04:24:37.006061+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: DELETE /api/soul/users/ee14913b-d59b-45b1-96b3-592e36e4b098", "module": "logging", "function": "dispatch", "line": 24, "request_id": "94a4b519"}
{"timestamp": "2026-02-25T04:24:37.016062+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Deleted user: ee14913b-d59b-45b1-96b3-592e36e4b098", "module": "user_repository", "function": "delete", "line": 70}
{"timestamp": "2026-02-25T04:24:37.016062+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: DELETE /api/soul/users/ee14913b-d59b-45b1-96b3-592e36e4b098 status=200 duration=0.010s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "94a4b519"}
{"timestamp": "2026-02-25T04:24:39.075418+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "9b402637"}
{"timestamp": "2026-02-25T04:24:39.078419+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Created user: 961627f7-1663-49fa-bf62-839c27a1ec43 (pytest_history_tmp)", "module": "user_repository", "function": "create", "line": 49}
{"timestamp": "2026-02-25T04:24:39.078419+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/users status=200 duration=0.003s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "9b402637"}
{"timestamp": "2026-02-25T04:24:41.130012+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "47871412"}
{"timestamp": "2026-02-25T04:24:41.131012+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "47871412"}
{"timestamp": "2026-02-25T04:24:43.172218+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/history/961627f7-1663-49fa-bf62-839c27a1ec43/勇哥说财经 - 抖音", "module": "logging", "function": "dispatch", "line": 24, "request_id": "5bb48753"}
{"timestamp": "2026-02-25T04:24:43.172218+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/history/961627f7-1663-49fa-bf62-839c27a1ec43/勇哥说财经 - 抖音 status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "5bb48753"}
{"timestamp": "2026-02-25T04:24:45.242984+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: DELETE /api/soul/users/961627f7-1663-49fa-bf62-839c27a1ec43", "module": "logging", "function": "dispatch", "line": 24, "request_id": "4c17dbe7"}
{"timestamp": "2026-02-25T04:24:45.253985+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Deleted user: 961627f7-1663-49fa-bf62-839c27a1ec43", "module": "user_repository", "function": "delete", "line": 70}
{"timestamp": "2026-02-25T04:24:45.253985+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: DELETE /api/soul/users/961627f7-1663-49fa-bf62-839c27a1ec43 status=200 duration=0.011s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "4c17dbe7"}
{"timestamp": "2026-02-25T04:24:47.302464+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "1f172f9e"}
{"timestamp": "2026-02-25T04:24:47.309453+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Created user: fd862903-8a72-4327-8187-317a5beb5f68 (pytest_chat_tmp)", "module": "user_repository", "function": "create", "line": 49}
{"timestamp": "2026-02-25T04:24:47.309453+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/users status=200 duration=0.007s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "1f172f9e"}
{"timestamp": "2026-02-25T04:24:49.391139+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "beba73d1"}
{"timestamp": "2026-02-25T04:24:49.392140+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "beba73d1"}
{"timestamp": "2026-02-25T04:24:51.452985+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/chat", "module": "logging", "function": "dispatch", "line": 24, "request_id": "9d78d7d1"}
{"timestamp": "2026-02-25T04:24:51.452985+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/chat status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "9d78d7d1"}
{"timestamp": "2026-02-25T04:24:51.476108+00:00", "level": "INFO", "logger": "core.graph.nodes.load_context", "message": "Loaded context: user=pytest_chat_tmp, persona=勇哥说财经 - 抖音, today_msgs=0, memories=0", "module": "load_context", "function": "load_context", "line": 44}
{"timestamp": "2026-02-25T04:24:57.520517+00:00", "level": "INFO", "logger": "core.graph.nodes.analyze_message", "message": "Intent analysis: intent=chat, knowledge=False, memory=False", "module": "analyze_message", "function": "analyze_message", "line": 28}
{"timestamp": "2026-02-25T04:25:02.431386+00:00", "level": "INFO", "logger": "core.graph.nodes.generate_response", "message": "Generated response: 476 chars", "module": "generate_response", "function": "generate_response", "line": 51}
{"timestamp": "2026-02-25T04:25:02.444384+00:00", "level": "INFO", "logger": "core.graph.nodes.post_process", "message": "Saved messages: user_id=fd862903-8a72-4327-8187-317a5beb5f68, blogger=勇哥说财经 - 抖音, total_messages=2", "module": "post_process", "function": "post_process", "line": 41}
{"timestamp": "2026-02-25T04:25:04.528077+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: DELETE /api/soul/users/fd862903-8a72-4327-8187-317a5beb5f68", "module": "logging", "function": "dispatch", "line": 24, "request_id": "a408ac70"}
{"timestamp": "2026-02-25T04:25:04.539078+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Deleted user: fd862903-8a72-4327-8187-317a5beb5f68", "module": "user_repository", "function": "delete", "line": 70}
{"timestamp": "2026-02-25T04:25:04.539078+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: DELETE /api/soul/users/fd862903-8a72-4327-8187-317a5beb5f68 status=200 duration=0.011s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "a408ac70"}
{"timestamp": "2026-02-25T04:25:06.573260+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "a953bee8"}
{"timestamp": "2026-02-25T04:25:06.576259+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Created user: 995c4246-2914-4bcb-8468-6ca1d51da007 (pytest_chat_tmp)", "module": "user_repository", "function": "create", "line": 49}
{"timestamp": "2026-02-25T04:25:06.576259+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/users status=200 duration=0.003s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "a953bee8"}
{"timestamp": "2026-02-25T04:25:08.626678+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "32c5000a"}
{"timestamp": "2026-02-25T04:25:08.627679+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "32c5000a"}
{"timestamp": "2026-02-25T04:25:10.671388+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/chat", "module": "logging", "function": "dispatch", "line": 24, "request_id": "f2eaec64"}
{"timestamp": "2026-02-25T04:25:10.671388+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/chat status=200 duration=0.000s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "f2eaec64"}
{"timestamp": "2026-02-25T04:25:10.697476+00:00", "level": "INFO", "logger": "core.graph.nodes.load_context", "message": "Loaded context: user=pytest_chat_tmp, persona=勇哥说财经 - 抖音, today_msgs=0, memories=0", "module": "load_context", "function": "load_context", "line": 44}
{"timestamp": "2026-02-25T04:25:12.708414+00:00", "level": "INFO", "logger": "core.graph.nodes.analyze_message", "message": "Intent analysis: intent=question, knowledge=True, memory=False", "module": "analyze_message", "function": "analyze_message", "line": 28}
{"timestamp": "2026-02-25T04:25:12.777414+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "Connected to ChromaDB: persona=勇哥说财经 - 抖音, collection=b-0_b929855a", "module": "chroma_store", "function": "connect", "line": 76}
{"timestamp": "2026-02-25T04:25:12.799423+00:00", "level": "WARNING", "logger": "managers.persona_manager", "message": "ChromaDB index corrupted for 勇哥说财经 - 抖音: Error executing plan: Error sending backfill request to compactor: Error constructing hnsw segment reader: Error creating hnsw segment reader: Error loading hnsw index. Rebuilding...", "module": "persona_manager", "function": "connect_knowledge_base", "line": 168}
{"timestamp": "2026-02-25T04:25:12.806423+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "Rebuilding ChromaDB for 勇哥说财经 - 抖音: 2214 segments from D:\\Work\\mahoupao\\video-analysis\\video-analysis\\video-analysis-maker\\output\\勇哥说财经 - 抖音\\optimized_texts", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 245}
{"timestamp": "2026-02-25T04:25:12.846423+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "Deleted corrupt collection: b-0_b929855a", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 256}
{"timestamp": "2026-02-25T04:25:13.239854+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "  Added 64/2214 documents...", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 310}
{"timestamp": "2026-02-25T04:25:13.355259+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "  Added 128/2214 documents...", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 310}
{"timestamp": "2026-02-25T04:25:13.424817+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "  Added 192/2214 documents...", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 310}
{"timestamp": "2026-02-25T04:25:13.497324+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "  Added 256/2214 documents...", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 310}
{"timestamp": "2026-02-25T04:25:13.576220+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "  Added 320/2214 documents...", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 310}
{"timestamp": "2026-02-25T04:25:13.653310+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "  Added 384/2214 documents...", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 310}
{"timestamp": "2026-02-25T04:25:13.734322+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "  Added 448/2214 documents...", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 310}
{"timestamp": "2026-02-25T04:25:13.810086+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "  Added 512/2214 documents...", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 310}
{"timestamp": "2026-02-25T04:25:13.889634+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "  Added 576/2214 documents...", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 310}
{"timestamp": "2026-02-25T04:25:13.976146+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "  Added 640/2214 documents...", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 310}
{"timestamp": "2026-02-25T04:25:14.063650+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "  Added 704/2214 documents...", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 310}
{"timestamp": "2026-02-25T04:25:14.150369+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "  Added 768/2214 documents...", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 310}
{"timestamp": "2026-02-25T04:25:14.237880+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "  Added 832/2214 documents...", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 310}
{"timestamp": "2026-02-25T04:25:14.322078+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "  Added 896/2214 documents...", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 310}
{"timestamp": "2026-02-25T04:25:14.408586+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "  Added 960/2214 documents...", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 310}
{"timestamp": "2026-02-25T04:25:14.521652+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "  Added 1024/2214 documents...", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 310}
{"timestamp": "2026-02-25T04:25:14.585764+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "  Added 1088/2214 documents...", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 310}
{"timestamp": "2026-02-25T04:25:14.655270+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "  Added 1152/2214 documents...", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 310}
{"timestamp": "2026-02-25T04:25:14.726612+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "  Added 1216/2214 documents...", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 310}
{"timestamp": "2026-02-25T04:25:14.801127+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "  Added 1280/2214 documents...", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 310}
{"timestamp": "2026-02-25T04:25:14.873132+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "  Added 1344/2214 documents...", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 310}
{"timestamp": "2026-02-25T04:25:14.950404+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "  Added 1408/2214 documents...", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 310}
{"timestamp": "2026-02-25T04:25:15.025910+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "  Added 1472/2214 documents...", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 310}
{"timestamp": "2026-02-25T04:25:15.114150+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "  Added 1536/2214 documents...", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 310}
{"timestamp": "2026-02-25T04:25:15.199692+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "  Added 1600/2214 documents...", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 310}
{"timestamp": "2026-02-25T04:25:15.285698+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "  Added 1664/2214 documents...", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 310}
{"timestamp": "2026-02-25T04:25:15.373856+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "  Added 1728/2214 documents...", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 310}
{"timestamp": "2026-02-25T04:25:15.466656+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "  Added 1792/2214 documents...", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 310}
{"timestamp": "2026-02-25T04:25:15.558173+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "  Added 1856/2214 documents...", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 310}
{"timestamp": "2026-02-25T04:25:15.652393+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "  Added 1920/2214 documents...", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 310}
{"timestamp": "2026-02-25T04:25:15.744592+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "  Added 1984/2214 documents...", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 310}
{"timestamp": "2026-02-25T04:25:15.859097+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "  Added 2048/2214 documents...", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 310}
{"timestamp": "2026-02-25T04:25:15.925604+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "  Added 2112/2214 documents...", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 310}
{"timestamp": "2026-02-25T04:25:15.988607+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "  Added 2176/2214 documents...", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 310}
{"timestamp": "2026-02-25T04:25:16.047666+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "  Added 2214/2214 documents...", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 310}
{"timestamp": "2026-02-25T04:25:16.047666+00:00", "level": "INFO", "logger": "storage.vector_stores.chroma_store", "message": "ChromaDB rebuilt: persona=勇哥说财经 - 抖音, collection=b-0_b929855a, docs=2214", "module": "chroma_store", "function": "rebuild_from_optimized_texts", "line": 316}
{"timestamp": "2026-02-25T04:25:16.047666+00:00", "level": "INFO", "logger": "managers.persona_manager", "message": "Knowledge base rebuilt for 勇哥说财经 - 抖音: 2214 documents", "module": "persona_manager", "function": "_rebuild_knowledge_base", "line": 196}
{"timestamp": "2026-02-25T04:25:16.095173+00:00", "level": "INFO", "logger": "services.retrieval_service", "message": "Knowledge search: persona=勇哥说财经 - 抖音, query='帮我分析一下最近的市场趋势', results=3", "module": "retrieval_service", "function": "search_knowledge", "line": 57}
{"timestamp": "2026-02-25T04:25:16.095173+00:00", "level": "INFO", "logger": "core.graph.nodes.knowledge_retrieval", "message": "Knowledge retrieval: found 3 results", "module": "knowledge_retrieval", "function": "knowledge_retrieval", "line": 35}
{"timestamp": "2026-02-25T04:25:23.709649+00:00", "level": "INFO", "logger": "core.graph.nodes.generate_response", "message": "Generated response: 626 chars", "module": "generate_response", "function": "generate_response", "line": 51}
{"timestamp": "2026-02-25T04:25:23.721650+00:00", "level": "INFO", "logger": "core.graph.nodes.post_process", "message": "Saved messages: user_id=995c4246-2914-4bcb-8468-6ca1d51da007, blogger=勇哥说财经 - 抖音, total_messages=2", "module": "post_process", "function": "post_process", "line": 41}
{"timestamp": "2026-02-25T04:25:25.789407+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: DELETE /api/soul/users/995c4246-2914-4bcb-8468-6ca1d51da007", "module": "logging", "function": "dispatch", "line": 24, "request_id": "836d859c"}
{"timestamp": "2026-02-25T04:25:25.799913+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Deleted user: 995c4246-2914-4bcb-8468-6ca1d51da007", "module": "user_repository", "function": "delete", "line": 70}
{"timestamp": "2026-02-25T04:25:25.799913+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: DELETE /api/soul/users/995c4246-2914-4bcb-8468-6ca1d51da007 status=200 duration=0.011s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "836d859c"}
{"timestamp": "2026-02-25T04:25:27.849190+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "3a4272bc"}
{"timestamp": "2026-02-25T04:25:27.852191+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Created user: 3c50d2c5-ad22-411c-9758-718d4fbfd6f5 (pytest_chat_tmp)", "module": "user_repository", "function": "create", "line": 49}
{"timestamp": "2026-02-25T04:25:27.852191+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/users status=200 duration=0.003s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "3a4272bc"}
{"timestamp": "2026-02-25T04:25:29.918701+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "77e7e561"}
{"timestamp": "2026-02-25T04:25:29.919700+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.002s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "77e7e561"}
{"timestamp": "2026-02-25T04:25:31.977214+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/chat", "module": "logging", "function": "dispatch", "line": 24, "request_id": "c4229365"}
{"timestamp": "2026-02-25T04:25:31.978214+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/chat status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "c4229365"}
{"timestamp": "2026-02-25T04:25:34.036695+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: DELETE /api/soul/users/3c50d2c5-ad22-411c-9758-718d4fbfd6f5", "module": "logging", "function": "dispatch", "line": 24, "request_id": "6f417379"}
{"timestamp": "2026-02-25T04:25:34.044695+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Deleted user: 3c50d2c5-ad22-411c-9758-718d4fbfd6f5", "module": "user_repository", "function": "delete", "line": 70}
{"timestamp": "2026-02-25T04:25:34.044695+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: DELETE /api/soul/users/3c50d2c5-ad22-411c-9758-718d4fbfd6f5 status=200 duration=0.008s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "6f417379"}
{"timestamp": "2026-02-25T04:25:36.095004+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "b4a448e5"}
{"timestamp": "2026-02-25T04:25:36.098004+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Created user: 2f423a8e-04cf-438a-ba73-d6cde055ec29 (pytest_chat_tmp)", "module": "user_repository", "function": "create", "line": 49}
{"timestamp": "2026-02-25T04:25:36.099004+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/users status=200 duration=0.003s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "b4a448e5"}
{"timestamp": "2026-02-25T04:25:38.154243+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "15f1ef74"}
{"timestamp": "2026-02-25T04:25:38.155237+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "15f1ef74"}
{"timestamp": "2026-02-25T04:25:40.224952+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/chat", "module": "logging", "function": "dispatch", "line": 24, "request_id": "fcdfe2c4"}
{"timestamp": "2026-02-25T04:25:40.225954+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/chat status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "fcdfe2c4"}
{"timestamp": "2026-02-25T04:25:42.269496+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: DELETE /api/soul/users/2f423a8e-04cf-438a-ba73-d6cde055ec29", "module": "logging", "function": "dispatch", "line": 24, "request_id": "ce1a14cc"}
{"timestamp": "2026-02-25T04:25:42.278495+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Deleted user: 2f423a8e-04cf-438a-ba73-d6cde055ec29", "module": "user_repository", "function": "delete", "line": 70}
{"timestamp": "2026-02-25T04:25:42.278495+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: DELETE /api/soul/users/2f423a8e-04cf-438a-ba73-d6cde055ec29 status=200 duration=0.009s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "ce1a14cc"}
{"timestamp": "2026-02-25T04:25:44.329651+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "bfea09bd"}
{"timestamp": "2026-02-25T04:25:44.332650+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Created user: 92429339-6c75-4fb0-8ad4-44373e304be6 (pytest_chat_tmp)", "module": "user_repository", "function": "create", "line": 49}
{"timestamp": "2026-02-25T04:25:44.332650+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/users status=200 duration=0.003s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "bfea09bd"}
{"timestamp": "2026-02-25T04:25:46.394719+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "f4342dea"}
{"timestamp": "2026-02-25T04:25:46.395718+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "f4342dea"}
{"timestamp": "2026-02-25T04:25:48.437815+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/chat", "module": "logging", "function": "dispatch", "line": 24, "request_id": "f43b377b"}
{"timestamp": "2026-02-25T04:25:48.437815+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/chat status=200 duration=0.000s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "f43b377b"}
{"timestamp": "2026-02-25T04:25:48.461813+00:00", "level": "INFO", "logger": "core.graph.nodes.load_context", "message": "Loaded context: user=pytest_chat_tmp, persona=勇哥说财经 - 抖音, today_msgs=0, memories=0", "module": "load_context", "function": "load_context", "line": 44}
{"timestamp": "2026-02-25T04:25:53.027426+00:00", "level": "INFO", "logger": "core.graph.nodes.analyze_message", "message": "Intent analysis: intent=question, knowledge=True, memory=False", "module": "analyze_message", "function": "analyze_message", "line": 28}
{"timestamp": "2026-02-25T04:25:53.110430+00:00", "level": "INFO", "logger": "services.retrieval_service", "message": "Knowledge search: persona=勇哥说财经 - 抖音, query='pytest_persist_test_1771993546', results=3", "module": "retrieval_service", "function": "search_knowledge", "line": 57}
{"timestamp": "2026-02-25T04:25:53.110430+00:00", "level": "INFO", "logger": "core.graph.nodes.knowledge_retrieval", "message": "Knowledge retrieval: found 3 results", "module": "knowledge_retrieval", "function": "knowledge_retrieval", "line": 35}
{"timestamp": "2026-02-25T04:26:01.881550+00:00", "level": "INFO", "logger": "core.graph.nodes.generate_response", "message": "Generated response: 508 chars", "module": "generate_response", "function": "generate_response", "line": 51}
{"timestamp": "2026-02-25T04:26:01.893551+00:00", "level": "INFO", "logger": "core.graph.nodes.post_process", "message": "Saved messages: user_id=92429339-6c75-4fb0-8ad4-44373e304be6, blogger=勇哥说财经 - 抖音, total_messages=2", "module": "post_process", "function": "post_process", "line": 41}
{"timestamp": "2026-02-25T04:26:03.952747+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/history/92429339-6c75-4fb0-8ad4-44373e304be6/勇哥说财经 - 抖音", "module": "logging", "function": "dispatch", "line": 24, "request_id": "e146ce52"}
{"timestamp": "2026-02-25T04:26:03.955748+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/history/92429339-6c75-4fb0-8ad4-44373e304be6/勇哥说财经 - 抖音 status=200 duration=0.004s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "e146ce52"}
{"timestamp": "2026-02-25T04:26:06.016175+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: DELETE /api/soul/users/92429339-6c75-4fb0-8ad4-44373e304be6", "module": "logging", "function": "dispatch", "line": 24, "request_id": "108c8bc7"}
{"timestamp": "2026-02-25T04:26:06.026332+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Deleted user: 92429339-6c75-4fb0-8ad4-44373e304be6", "module": "user_repository", "function": "delete", "line": 70}
{"timestamp": "2026-02-25T04:26:06.026332+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: DELETE /api/soul/users/92429339-6c75-4fb0-8ad4-44373e304be6 status=200 duration=0.010s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "108c8bc7"}
{"timestamp": "2026-02-25T04:26:08.055671+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/users", "module": "logging", "function": "dispatch", "line": 24, "request_id": "ce250cb4"}
{"timestamp": "2026-02-25T04:26:08.059672+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Created user: 06905811-06e7-4500-8ca4-ffc836ad883f (pytest_e2e)", "module": "user_repository", "function": "create", "line": 49}
{"timestamp": "2026-02-25T04:26:08.059672+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/users status=200 duration=0.004s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "ce250cb4"}
{"timestamp": "2026-02-25T04:26:10.115107+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "effe6013"}
{"timestamp": "2026-02-25T04:26:10.116109+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "effe6013"}
{"timestamp": "2026-02-25T04:26:12.190024+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers/勇哥说财经 - 抖音", "module": "logging", "function": "dispatch", "line": 24, "request_id": "03631fbd"}
{"timestamp": "2026-02-25T04:26:12.191020+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers/勇哥说财经 - 抖音 status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "03631fbd"}
{"timestamp": "2026-02-25T04:26:14.231399+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/history/06905811-06e7-4500-8ca4-ffc836ad883f/勇哥说财经 - 抖音", "module": "logging", "function": "dispatch", "line": 24, "request_id": "9a4cbb20"}
{"timestamp": "2026-02-25T04:26:14.232399+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/history/06905811-06e7-4500-8ca4-ffc836ad883f/勇哥说财经 - 抖音 status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "9a4cbb20"}
{"timestamp": "2026-02-25T04:26:16.288731+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: POST /api/soul/chat", "module": "logging", "function": "dispatch", "line": 24, "request_id": "3c4c5bb5"}
{"timestamp": "2026-02-25T04:26:16.290729+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: POST /api/soul/chat status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "3c4c5bb5"}
{"timestamp": "2026-02-25T04:26:16.317733+00:00", "level": "INFO", "logger": "core.graph.nodes.load_context", "message": "Loaded context: user=pytest_e2e, persona=勇哥说财经 - 抖音, today_msgs=0, memories=0", "module": "load_context", "function": "load_context", "line": 44}
{"timestamp": "2026-02-25T04:26:19.806319+00:00", "level": "INFO", "logger": "core.graph.nodes.analyze_message", "message": "Intent analysis: intent=greeting, knowledge=False, memory=False", "module": "analyze_message", "function": "analyze_message", "line": 28}
{"timestamp": "2026-02-25T04:26:24.994279+00:00", "level": "INFO", "logger": "core.graph.nodes.post_process", "message": "Saved messages: user_id=06905811-06e7-4500-8ca4-ffc836ad883f, blogger=勇哥说财经 - 抖音, total_messages=2", "module": "post_process", "function": "post_process", "line": 41}
{"timestamp": "2026-02-25T04:26:27.043673+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/history/06905811-06e7-4500-8ca4-ffc836ad883f/勇哥说财经 - 抖音", "module": "logging", "function": "dispatch", "line": 24, "request_id": "9176e6a3"}
{"timestamp": "2026-02-25T04:26:27.044673+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/history/06905811-06e7-4500-8ca4-ffc836ad883f/勇哥说财经 - 抖音 status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "9176e6a3"}
{"timestamp": "2026-02-25T04:26:29.101054+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: DELETE /api/soul/users/06905811-06e7-4500-8ca4-ffc836ad883f", "module": "logging", "function": "dispatch", "line": 24, "request_id": "78b28ace"}
{"timestamp": "2026-02-25T04:26:29.110056+00:00", "level": "INFO", "logger": "storage.repositories.user_repository", "message": "Deleted user: 06905811-06e7-4500-8ca4-ffc836ad883f", "module": "user_repository", "function": "delete", "line": 70}
{"timestamp": "2026-02-25T04:26:29.110056+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: DELETE /api/soul/users/06905811-06e7-4500-8ca4-ffc836ad883f status=200 duration=0.010s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "78b28ace"}
{"timestamp": "2026-02-25T04:36:05.926613+00:00", "level": "INFO", "logger": "main", "message": "Starting Video-Analysis-Soul...", "module": "main", "function": "lifespan", "line": 28}
{"timestamp": "2026-02-25T04:36:05.928769+00:00", "level": "INFO", "logger": "core.engine", "message": "Starting SoulEngine...", "module": "engine", "function": "start", "line": 50}
{"timestamp": "2026-02-25T04:36:05.928769+00:00", "level": "INFO", "logger": "managers.cache_manager", "message": "Session cache manager started", "module": "cache_manager", "function": "start", "line": 38}
{"timestamp": "2026-02-25T04:36:05.947768+00:00", "level": "INFO", "logger": "services.embedding_service", "message": "Loading embedding model: BAAI/bge-large-zh-v1.5 (device: cuda)", "module": "embedding_service", "function": "initialize", "line": 46}
{"timestamp": "2026-02-25T04:36:05.949768+00:00", "level": "INFO", "logger": "sentence_transformers.SentenceTransformer", "message": "Load pretrained SentenceTransformer: BAAI/bge-large-zh-v1.5", "module": "SentenceTransformer", "function": "__init__", "line": 227}
{"timestamp": "2026-02-25T04:36:10.012547+00:00", "level": "INFO", "logger": "services.embedding_service", "message": "Embedding model loaded: dim=1024", "module": "embedding_service", "function": "initialize", "line": 50}
{"timestamp": "2026-02-25T04:36:10.013551+00:00", "level": "INFO", "logger": "core.graph.workflow", "message": "LangGraph workflow built successfully", "module": "workflow", "function": "build_workflow", "line": 105}
{"timestamp": "2026-02-25T04:36:10.016550+00:00", "level": "INFO", "logger": "core.engine", "message": "SoulEngine started successfully", "module": "engine", "function": "start", "line": 71}
{"timestamp": "2026-02-25T04:36:10.016550+00:00", "level": "INFO", "logger": "main", "message": "Server running on 0.0.0.0:8004", "module": "main", "function": "lifespan", "line": 34}
{"timestamp": "2026-02-25T04:36:15.805850+00:00", "level": "INFO", "logger": "main", "message": "Shutting down...", "module": "main", "function": "lifespan", "line": 38}
{"timestamp": "2026-02-25T04:36:15.806851+00:00", "level": "INFO", "logger": "core.engine", "message": "Stopping SoulEngine...", "module": "engine", "function": "stop", "line": 75}
{"timestamp": "2026-02-25T04:36:15.806851+00:00", "level": "INFO", "logger": "managers.cache_manager", "message": "Session cache manager stopped", "module": "cache_manager", "function": "stop", "line": 48}
{"timestamp": "2026-02-25T04:36:15.807851+00:00", "level": "INFO", "logger": "managers.persona_manager", "message": "PersonaManager closed", "module": "persona_manager", "function": "close", "line": 326}
{"timestamp": "2026-02-25T04:36:15.807851+00:00", "level": "INFO", "logger": "core.engine", "message": "SoulEngine stopped", "module": "engine", "function": "stop", "line": 78}
{"timestamp": "2026-02-25T04:37:09.569862+00:00", "level": "INFO", "logger": "main", "message": "Starting Video-Analysis-Soul...", "module": "main", "function": "lifespan", "line": 28}
{"timestamp": "2026-02-25T04:37:09.570863+00:00", "level": "INFO", "logger": "core.engine", "message": "Starting SoulEngine...", "module": "engine", "function": "start", "line": 50}
{"timestamp": "2026-02-25T04:37:09.570863+00:00", "level": "INFO", "logger": "managers.cache_manager", "message": "Session cache manager started", "module": "cache_manager", "function": "start", "line": 38}
{"timestamp": "2026-02-25T04:37:09.597227+00:00", "level": "INFO", "logger": "services.embedding_service", "message": "Loading embedding model: BAAI/bge-large-zh-v1.5 (device: cuda)", "module": "embedding_service", "function": "initialize", "line": 46}
{"timestamp": "2026-02-25T04:37:09.599228+00:00", "level": "INFO", "logger": "sentence_transformers.SentenceTransformer", "message": "Load pretrained SentenceTransformer: BAAI/bge-large-zh-v1.5", "module": "SentenceTransformer", "function": "__init__", "line": 227}
{"timestamp": "2026-02-25T04:37:13.706174+00:00", "level": "INFO", "logger": "services.embedding_service", "message": "Embedding model loaded: dim=1024", "module": "embedding_service", "function": "initialize", "line": 50}
{"timestamp": "2026-02-25T04:37:13.707175+00:00", "level": "INFO", "logger": "core.graph.workflow", "message": "LangGraph workflow built successfully", "module": "workflow", "function": "build_workflow", "line": 105}
{"timestamp": "2026-02-25T04:37:13.709175+00:00", "level": "INFO", "logger": "core.engine", "message": "SoulEngine started successfully", "module": "engine", "function": "start", "line": 71}
{"timestamp": "2026-02-25T04:37:13.709175+00:00", "level": "INFO", "logger": "main", "message": "Server running on 0.0.0.0:8004", "module": "main", "function": "lifespan", "line": 34}
{"timestamp": "2026-02-25T04:38:14.514324+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/status", "module": "logging", "function": "dispatch", "line": 24, "request_id": "c8612c74"}
{"timestamp": "2026-02-25T04:38:14.516324+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/status status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "c8612c74"}
{"timestamp": "2026-02-25T04:38:14.527424+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "9af4263d"}
{"timestamp": "2026-02-25T04:38:14.532530+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.004s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "9af4263d"}
{"timestamp": "2026-02-25T04:39:11.676630+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/status", "module": "logging", "function": "dispatch", "line": 24, "request_id": "baa5195c"}
{"timestamp": "2026-02-25T04:39:11.676630+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/status status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "baa5195c"}
{"timestamp": "2026-02-25T04:39:11.683132+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request start: GET /api/soul/bloggers", "module": "logging", "function": "dispatch", "line": 24, "request_id": "4ea54f3e"}
{"timestamp": "2026-02-25T04:39:11.684137+00:00", "level": "INFO", "logger": "api.middleware.logging", "message": "Request end: GET /api/soul/bloggers status=200 duration=0.001s", "module": "logging", "function": "dispatch", "line": 32, "request_id": "4ea54f3e"}
{"timestamp": "2026-02-25T05:38:29.195615+00:00", "level": "INFO", "logger": "main", "message": "Shutting down...", "module": "main", "function": "lifespan", "line": 38}
{"timestamp": "2026-02-25T05:38:29.196615+00:00", "level": "INFO", "logger": "core.engine", "message": "Stopping SoulEngine...", "module": "engine", "function": "stop", "line": 75}
{"timestamp": "2026-02-25T05:38:29.196615+00:00", "level": "INFO", "logger": "managers.cache_manager", "message": "Session cache manager stopped", "module": "cache_manager", "function": "stop", "line": 48}
{"timestamp": "2026-02-25T05:38:29.201616+00:00", "level": "INFO", "logger": "managers.persona_manager", "message": "PersonaManager closed", "module": "persona_manager", "function": "close", "line": 326}
{"timestamp": "2026-02-25T05:38:29.201616+00:00", "level": "INFO", "logger": "core.engine", "message": "SoulEngine stopped", "module": "engine", "function": "stop", "line": 78}
{"timestamp": "2026-02-25T05:38:35.713426+00:00", "level": "INFO", "logger": "main", "message": "Starting Video-Analysis-Soul...", "module": "main", "function": "lifespan", "line": 28}
{"timestamp": "2026-02-25T05:38:35.714427+00:00", "level": "INFO", "logger": "core.engine", "message": "Starting SoulEngine...", "module": "engine", "function": "start", "line": 50}
{"timestamp": "2026-02-25T05:38:35.714427+00:00", "level": "INFO", "logger": "managers.cache_manager", "message": "Session cache manager started", "module": "cache_manager", "function": "start", "line": 38}
{"timestamp": "2026-02-25T05:38:35.732430+00:00", "level": "INFO", "logger": "services.embedding_service", "message": "Loading embedding model: BAAI/bge-large-zh-v1.5 (device: cuda)", "module": "embedding_service", "function": "initialize", "line": 46}
{"timestamp": "2026-02-25T05:38:35.734429+00:00", "level": "INFO", "logger": "sentence_transformers.SentenceTransformer", "message": "Load pretrained SentenceTransformer: BAAI/bge-large-zh-v1.5", "module": "SentenceTransformer", "function": "__init__", "line": 227}
{"timestamp": "2026-02-25T05:38:39.942020+00:00", "level": "INFO", "logger": "services.embedding_service", "message": "Embedding model loaded: dim=1024", "module": "embedding_service", "function": "initialize", "line": 50}
{"timestamp": "2026-02-25T05:38:39.943023+00:00", "level": "INFO", "logger": "core.graph.workflow", "message": "LangGraph workflow built successfully", "module": "workflow", "function": "build_workflow", "line": 105}
{"timestamp": "2026-02-25T05:38:39.944022+00:00", "level": "INFO", "logger": "core.engine", "message": "SoulEngine started successfully", "module": "engine", "function": "start", "line": 71}
{"timestamp": "2026-02-25T05:38:39.944022+00:00", "level": "INFO", "logger": "main", "message": "Server running on 0.0.0.0:8004", "module": "main", "function": "lifespan", "line": 34}
{"timestamp": "2026-02-25T05:38:46.375219+00:00", "level": "INFO", "logger": "main", "message": "Starting Video-Analysis-Soul...", "module": "main", "function": "lifespan", "line": 28}
{"timestamp": "2026-02-25T05:38:46.376220+00:00", "level": "INFO", "logger": "core.engine", "message": "Starting SoulEngine...", "module": "engine", "function": "start", "line": 50}
{"timestamp": "2026-02-25T05:38:46.376220+00:00", "level": "INFO", "logger": "managers.cache_manager", "message": "Session cache manager started", "module": "cache_manager", "function": "start", "line": 38}
{"timestamp": "2026-02-25T05:38:46.400222+00:00", "level": "INFO", "logger": "services.embedding_service", "message": "Loading embedding model: BAAI/bge-large-zh-v1.5 (device: cuda)", "module": "embedding_service", "function": "initialize", "line": 46}
{"timestamp": "2026-02-25T05:38:46.402221+00:00", "level": "INFO", "logger": "sentence_transformers.SentenceTransformer", "message": "Load pretrained SentenceTransformer: BAAI/bge-large-zh-v1.5", "module": "SentenceTransformer", "function": "__init__", "line": 227}
{"timestamp": "2026-02-25T05:38:50.553538+00:00", "level": "INFO", "logger": "services.embedding_service", "message": "Embedding model loaded: dim=1024", "module": "embedding_service", "function": "initialize", "line": 50}
{"timestamp": "2026-02-25T05:38:50.554613+00:00", "level": "INFO", "logger": "core.graph.workflow", "message": "LangGraph workflow built successfully", "module": "workflow", "function": "build_workflow", "line": 105}
{"timestamp": "2026-02-25T05:38:50.555612+00:00", "level": "INFO", "logger": "core.engine", "message": "SoulEngine started successfully", "module": "engine", "function": "start", "line": 71}
{"timestamp": "2026-02-25T05:38:50.556612+00:00", "level": "INFO", "logger": "main", "message": "Server running on 0.0.0.0:8004", "module": "main", "function": "lifespan", "line": 34}
{"timestamp": "2026-02-25T05:38:57.058923+00:00", "level": "INFO", "logger": "main", "message": "Starting Video-Analysis-Soul...", "module": "main", "function": "lifespan", "line": 28}
{"timestamp": "2026-02-25T05:38:57.060026+00:00", "level": "INFO", "logger": "core.engine", "message": "Starting SoulEngine...", "module": "engine", "function": "start", "line": 50}
{"timestamp": "2026-02-25T05:38:57.060026+00:00", "level": "INFO", "logger": "managers.cache_manager", "message": "Session cache manager started", "module": "cache_manager", "function": "start", "line": 38}
{"timestamp": "2026-02-25T05:38:57.076027+00:00", "level": "INFO", "logger": "services.embedding_service", "message": "Loading embedding model: BAAI/bge-large-zh-v1.5 (device: cuda)", "module": "embedding_service", "function": "initialize", "line": 46}
{"timestamp": "2026-02-25T05:38:57.079028+00:00", "level": "INFO", "logger": "sentence_transformers.SentenceTransformer", "message": "Load pretrained SentenceTransformer: BAAI/bge-large-zh-v1.5", "module": "SentenceTransformer", "function": "__init__", "line": 227}
{"timestamp": "2026-02-25T05:39:01.228678+00:00", "level": "INFO", "logger": "services.embedding_service", "message": "Embedding model loaded: dim=1024", "module": "embedding_service", "function": "initialize", "line": 50}
{"timestamp": "2026-02-25T05:39:01.229678+00:00", "level": "INFO", "logger": "core.graph.workflow", "message": "LangGraph workflow built successfully", "module": "workflow", "function": "build_workflow", "line": 105}
{"timestamp": "2026-02-25T05:39:01.231678+00:00", "level": "INFO", "logger": "core.engine", "message": "SoulEngine started successfully", "module": "engine", "function": "start", "line": 71}
{"timestamp": "2026-02-25T05:39:01.231678+00:00", "level": "INFO", "logger": "main", "message": "Server running on 0.0.0.0:8004", "module": "main", "function": "lifespan", "line": 34}
{"timestamp": "2026-02-25T05:39:07.695509+00:00", "level": "INFO", "logger": "main", "message": "Starting Video-Analysis-Soul...", "module": "main", "function": "lifespan", "line": 28}
{"timestamp": "2026-02-25T05:39:07.696510+00:00", "level": "INFO", "logger": "core.engine", "message": "Starting SoulEngine...", "module": "engine", "function": "start", "line": 50}
{"timestamp": "2026-02-25T05:39:07.696510+00:00", "level": "INFO", "logger": "managers.cache_manager", "message": "Session cache manager started", "module": "cache_manager", "function": "start", "line": 38}
{"timestamp": "2026-02-25T05:39:07.714512+00:00", "level": "INFO", "logger": "services.embedding_service", "message": "Loading embedding model: BAAI/bge-large-zh-v1.5 (device: cuda)", "module": "embedding_service", "function": "initialize", "line": 46}
{"timestamp": "2026-02-25T05:39:07.716515+00:00", "level": "INFO", "logger": "sentence_transformers.SentenceTransformer", "message": "Load pretrained SentenceTransformer: BAAI/bge-large-zh-v1.5", "module": "SentenceTransformer", "function": "__init__", "line": 227}
{"timestamp": "2026-02-25T05:39:11.862000+00:00", "level": "INFO", "logger": "services.embedding_service", "message": "Embedding model loaded: dim=1024", "module": "embedding_service", "function": "initialize", "line": 50}
{"timestamp": "2026-02-25T05:39:11.863046+00:00", "level": "INFO", "logger": "core.graph.workflow", "message": "LangGraph workflow built successfully", "module": "workflow", "function": "build_workflow", "line": 105}
{"timestamp": "2026-02-25T05:39:11.865003+00:00", "level": "INFO", "logger": "core.engine", "message": "SoulEngine started successfully", "module": "engine", "function": "start", "line": 71}
{"timestamp": "2026-02-25T05:39:11.865003+00:00", "level": "INFO", "logger": "main", "message": "Server running on 0.0.0.0:8004", "module": "main", "function": "lifespan", "line": 34}
{"timestamp": "2026-02-25T05:39:18.735158+00:00", "level": "INFO", "logger": "main", "message": "Shutting down...", "module": "main", "function": "lifespan", "line": 38}
{"timestamp": "2026-02-25T05:39:18.735158+00:00", "level": "INFO", "logger": "core.engine", "message": "Stopping SoulEngine...", "module": "engine", "function": "stop", "line": 75}
{"timestamp": "2026-02-25T05:39:18.735158+00:00", "level": "INFO", "logger": "managers.cache_manager", "message": "Session cache manager stopped", "module": "cache_manager", "function": "stop", "line": 48}
{"timestamp": "2026-02-25T05:39:18.736158+00:00", "level": "INFO", "logger": "managers.persona_manager", "message": "PersonaManager closed", "module": "persona_manager", "function": "close", "line": 326}
{"timestamp": "2026-02-25T05:39:18.736158+00:00", "level": "INFO", "logger": "core.engine", "message": "SoulEngine stopped", "module": "engine", "function": "stop", "line": 78}
{"timestamp": "2026-02-25T05:39:25.164889+00:00", "level": "INFO", "logger": "main", "message": "Starting Video-Analysis-Soul...", "module": "main", "function": "lifespan", "line": 28}
{"timestamp": "2026-02-25T05:39:25.165888+00:00", "level": "INFO", "logger": "core.engine", "message": "Starting SoulEngine...", "module": "engine", "function": "start", "line": 50}
{"timestamp": "2026-02-25T05:39:25.165888+00:00", "level": "INFO", "logger": "managers.cache_manager", "message": "Session cache manager started", "module": "cache_manager", "function": "start", "line": 38}
{"timestamp": "2026-02-25T05:39:25.182490+00:00", "level": "INFO", "logger": "services.embedding_service", "message": "Loading embedding model: BAAI/bge-large-zh-v1.5 (device: cuda)", "module": "embedding_service", "function": "initialize", "line": 46}
{"timestamp": "2026-02-25T05:39:25.184489+00:00", "level": "INFO", "logger": "sentence_transformers.SentenceTransformer", "message": "Load pretrained SentenceTransformer: BAAI/bge-large-zh-v1.5", "module": "SentenceTransformer", "function": "__init__", "line": 227}
{"timestamp": "2026-02-25T05:39:29.357437+00:00", "level": "INFO", "logger": "services.embedding_service", "message": "Embedding model loaded: dim=1024", "module": "embedding_service", "function": "initialize", "line": 50}
{"timestamp": "2026-02-25T05:39:29.358438+00:00", "level": "INFO", "logger": "core.graph.workflow", "message": "LangGraph workflow built successfully", "module": "workflow", "function": "build_workflow", "line": 105}
{"timestamp": "2026-02-25T05:39:29.360438+00:00", "level": "INFO", "logger": "core.engine", "message": "SoulEngine started successfully", "module": "engine", "function": "start", "line": 71}
{"timestamp": "2026-02-25T05:39:29.360438+00:00", "level": "INFO", "logger": "main", "message": "Server running on 0.0.0.0:8004", "module": "main", "function": "lifespan", "line": 34}
{"timestamp": "2026-02-25T05:39:35.827264+00:00", "level": "INFO", "logger": "main", "message": "Starting Video-Analysis-Soul...", "module": "main", "function": "lifespan", "line": 28}
{"timestamp": "2026-02-25T05:39:35.828264+00:00", "level": "INFO", "logger": "core.engine", "message": "Starting SoulEngine...", "module": "engine", "function": "start", "line": 50}
{"timestamp": "2026-02-25T05:39:35.828264+00:00", "level": "INFO", "logger": "managers.cache_manager", "message": "Session cache manager started", "module": "cache_manager", "function": "start", "line": 38}
{"timestamp": "2026-02-25T05:39:35.845263+00:00", "level": "INFO", "logger": "services.embedding_service", "message": "Loading embedding model: BAAI/bge-large-zh-v1.5 (device: cuda)", "module": "embedding_service", "function": "initialize", "line": 46}
{"timestamp": "2026-02-25T05:39:35.847265+00:00", "level": "INFO", "logger": "sentence_transformers.SentenceTransformer", "message": "Load pretrained SentenceTransformer: BAAI/bge-large-zh-v1.5", "module": "SentenceTransformer", "function": "__init__", "line": 227}
{"timestamp": "2026-02-25T05:39:39.927506+00:00", "level": "INFO", "logger": "services.embedding_service", "message": "Embedding model loaded: dim=1024", "module": "embedding_service", "function": "initialize", "line": 50}
{"timestamp": "2026-02-25T05:39:39.928507+00:00", "level": "INFO", "logger": "core.graph.workflow", "message": "LangGraph workflow built successfully", "module": "workflow", "function": "build_workflow", "line": 105}
{"timestamp": "2026-02-25T05:39:39.929506+00:00", "level": "INFO", "logger": "core.engine", "message": "SoulEngine started successfully", "module": "engine", "function": "start", "line": 71}
{"timestamp": "2026-02-25T05:39:39.930507+00:00", "level": "INFO", "logger": "main", "message": "Server running on 0.0.0.0:8004", "module": "main", "function": "lifespan", "line": 34}
{"timestamp": "2026-02-25T05:39:44.402982+00:00", "level": "INFO", "logger": "main", "message": "Shutting down...", "module": "main", "function": "lifespan", "line": 38}
{"timestamp": "2026-02-25T05:39:44.402982+00:00", "level": "INFO", "logger": "core.engine", "message": "Stopping SoulEngine...", "module": "engine", "function": "stop", "line": 75}
{"timestamp": "2026-02-25T05:39:44.402982+00:00", "level": "INFO", "logger": "managers.cache_manager", "message": "Session cache manager stopped", "module": "cache_manager", "function": "stop", "line": 48}
{"timestamp": "2026-02-25T05:39:44.403982+00:00", "level": "INFO", "logger": "managers.persona_manager", "message": "PersonaManager closed", "module": "persona_manager", "function": "close", "line": 326}
{"timestamp": "2026-02-25T05:39:44.403982+00:00", "level": "INFO", "logger": "core.engine", "message": "SoulEngine stopped", "module": "engine", "function": "stop", "line": 78}
{"timestamp": "2026-02-25T05:39:56.322898+00:00", "level": "INFO", "logger": "main", "message": "Starting Video-Analysis-Soul...", "module": "main", "function": "lifespan", "line": 28}
{"timestamp": "2026-02-25T05:39:56.324899+00:00", "level": "INFO", "logger": "core.engine", "message": "Starting SoulEngine...", "module": "engine", "function": "start", "line": 50}
{"timestamp": "2026-02-25T05:39:56.328898+00:00", "level": "INFO", "logger": "managers.cache_manager", "message": "Session cache manager started", "module": "cache_manager", "function": "start", "line": 38}
{"timestamp": "2026-02-25T05:39:56.358910+00:00", "level": "INFO", "logger": "services.embedding_service", "message": "Loading embedding model: BAAI/bge-large-zh-v1.5 (device: cuda)", "module": "embedding_service", "function": "initialize", "line": 46}
{"timestamp": "2026-02-25T05:39:56.369911+00:00", "level": "INFO", "logger": "sentence_transformers.SentenceTransformer", "message": "Load pretrained SentenceTransformer: BAAI/bge-large-zh-v1.5", "module": "SentenceTransformer", "function": "__init__", "line": 227}
{"timestamp": "2026-02-25T05:40:01.690751+00:00", "level": "INFO", "logger": "services.embedding_service", "message": "Embedding model loaded: dim=1024", "module": "embedding_service", "function": "initialize", "line": 50}
{"timestamp": "2026-02-25T05:40:01.691750+00:00", "level": "INFO", "logger": "core.graph.workflow", "message": "LangGraph workflow built successfully", "module": "workflow", "function": "build_workflow", "line": 105}
{"timestamp": "2026-02-25T05:40:01.694752+00:00", "level": "INFO", "logger": "core.engine", "message": "SoulEngine started successfully", "module": "engine", "function": "start", "line": 71}
{"timestamp": "2026-02-25T05:40:01.695752+00:00", "level": "INFO", "logger": "main", "message": "Server running on 0.0.0.0:8004", "module": "main", "function": "lifespan", "line": 34}
{"timestamp": "2026-02-25T05:40:13.815880+00:00", "level": "INFO", "logger": "main", "message": "Starting Video-Analysis-Soul...", "module": "main", "function": "lifespan", "line": 28}
{"timestamp": "2026-02-25T05:40:13.816880+00:00", "level": "INFO", "logger": "core.engine", "message": "Starting SoulEngine...", "module": "engine", "function": "start", "line": 50}
{"timestamp": "2026-02-25T05:40:13.818382+00:00", "level": "INFO", "logger": "managers.cache_manager", "message": "Session cache manager started", "module": "cache_manager", "function": "start", "line": 38}
{"timestamp": "2026-02-25T05:40:13.842394+00:00", "level": "INFO", "logger": "services.embedding_service", "message": "Loading embedding model: BAAI/bge-large-zh-v1.5 (device: cuda)", "module": "embedding_service", "function": "initialize", "line": 46}
{"timestamp": "2026-02-25T05:40:14.053511+00:00", "level": "INFO", "logger": "sentence_transformers.SentenceTransformer", "message": "Load pretrained SentenceTransformer: BAAI/bge-large-zh-v1.5", "module": "SentenceTransformer", "function": "__init__", "line": 227}
{"timestamp": "2026-02-25T05:40:19.159209+00:00", "level": "INFO", "logger": "services.embedding_service", "message": "Embedding model loaded: dim=1024", "module": "embedding_service", "function": "initialize", "line": 50}
{"timestamp": "2026-02-25T05:40:19.160209+00:00", "level": "INFO", "logger": "core.graph.workflow", "message": "LangGraph workflow built successfully", "module": "workflow", "function": "build_workflow", "line": 105}
{"timestamp": "2026-02-25T05:40:19.163209+00:00", "level": "INFO", "logger": "core.engine", "message": "SoulEngine started successfully", "module": "engine", "function": "start", "line": 71}
{"timestamp": "2026-02-25T05:40:19.164209+00:00", "level": "INFO", "logger": "main", "message": "Server running on 0.0.0.0:8004", "module": "main", "function": "lifespan", "line": 34}
{"timestamp": "2026-02-25T05:40:31.039874+00:00", "level": "INFO", "logger": "main", "message": "Starting Video-Analysis-Soul...", "module": "main", "function": "lifespan", "line": 28}
{"timestamp": "2026-02-25T05:40:31.041876+00:00", "level": "INFO", "logger": "core.engine", "message": "Starting SoulEngine...", "module": "engine", "function": "start", "line": 50}
{"timestamp": "2026-02-25T05:40:31.041876+00:00", "level": "INFO", "logger": "managers.cache_manager", "message": "Session cache manager started", "module": "cache_manager", "function": "start", "line": 38}
{"timestamp": "2026-02-25T05:40:31.072384+00:00", "level": "INFO", "logger": "services.embedding_service", "message": "Loading embedding model: BAAI/bge-large-zh-v1.5 (device: cuda)", "module": "embedding_service", "function": "initialize", "line": 46}
{"timestamp": "2026-02-25T05:40:31.281456+00:00", "level": "INFO", "logger": "sentence_transformers.SentenceTransformer", "message": "Load pretrained SentenceTransformer: BAAI/bge-large-zh-v1.5", "module": "SentenceTransformer", "function": "__init__", "line": 227}
{"timestamp": "2026-02-25T05:40:36.456207+00:00", "level": "INFO", "logger": "services.embedding_service", "message": "Embedding model loaded: dim=1024", "module": "embedding_service", "function": "initialize", "line": 50}
{"timestamp": "2026-02-25T05:40:36.458207+00:00", "level": "INFO", "logger": "core.graph.workflow", "message": "LangGraph workflow built successfully", "module": "workflow", "function": "build_workflow", "line": 105}
{"timestamp": "2026-02-25T05:40:36.465211+00:00", "level": "INFO", "logger": "core.engine", "message": "SoulEngine started successfully", "module": "engine", "function": "start", "line": 71}
{"timestamp": "2026-02-25T05:40:36.466211+00:00", "level": "INFO", "logger": "main", "message": "Server running on 0.0.0.0:8004", "module": "main", "function": "lifespan", "line": 34}
{"timestamp": "2026-02-25T05:40:49.119434+00:00", "level": "INFO", "logger": "main", "message": "Starting Video-Analysis-Soul...", "module": "main", "function": "lifespan", "line": 28}
{"timestamp": "2026-02-25T05:40:49.121434+00:00", "level": "INFO", "logger": "core.engine", "message": "Starting SoulEngine...", "module": "engine", "function": "start", "line": 50}
{"timestamp": "2026-02-25T05:40:49.121434+00:00", "level": "INFO", "logger": "managers.cache_manager", "message": "Session cache manager started", "module": "cache_manager", "function": "start", "line": 38}
{"timestamp": "2026-02-25T05:40:49.148360+00:00", "level": "INFO", "logger": "services.embedding_service", "message": "Loading embedding model: BAAI/bge-large-zh-v1.5 (device: cuda)", "module": "embedding_service", "function": "initialize", "line": 46}
{"timestamp": "2026-02-25T05:40:49.378856+00:00", "level": "INFO", "logger": "sentence_transformers.SentenceTransformer", "message": "Load pretrained SentenceTransformer: BAAI/bge-large-zh-v1.5", "module": "SentenceTransformer", "function": "__init__", "line": 227}
{"timestamp": "2026-02-25T05:40:54.950437+00:00", "level": "INFO", "logger": "services.embedding_service", "message": "Embedding model loaded: dim=1024", "module": "embedding_service", "function": "initialize", "line": 50}
{"timestamp": "2026-02-25T05:40:54.951437+00:00", "level": "INFO", "logger": "core.graph.workflow", "message": "LangGraph workflow built successfully", "module": "workflow", "function": "build_workflow", "line": 105}
{"timestamp": "2026-02-25T05:40:54.954940+00:00", "level": "INFO", "logger": "core.engine", "message": "SoulEngine started successfully", "module": "engine", "function": "start", "line": 71}
{"timestamp": "2026-02-25T05:40:54.954940+00:00", "level": "INFO", "logger": "main", "message": "Server running on 0.0.0.0:8004", "module": "main", "function": "lifespan", "line": 34}
